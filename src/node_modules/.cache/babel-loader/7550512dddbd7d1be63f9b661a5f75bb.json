{"ast":null,"code":"import _classCallCheck from\"D:/Projects/React/AMLS/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/Projects/React/AMLS/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"D:/Projects/React/AMLS/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"D:/Projects/React/AMLS/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"D:/Projects/React/AMLS/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from\"react\";import{Delimiter,DropDown,Helpers,PageMain,TextBox}from\"core\";import TabSection from\"../../componet/tab\";import constants from\"../../utils/constants\";import Button from\"../../componet/button\";import{IsLegalPersonNationalIdValid,IsRealPersonNationalIdValid}from\"../../utils/nationalIdentification\";import RealCustomerInformationSection from\"../../sections/customerProfile/realCustomerInformationSection\";import LegalCustomerInformationSection from\"../../sections/customerProfile/legalCustomerInformationSection\";import CtrAndStrSection from\"../../sections/customerProfile/ctrAndStrSection\";import CausalAndRelativeRelationshipSection from\"../../sections/customerProfile/causalAndRelativeRelationshipSection\";import NotificationSystem from\"react-notification-system\";import{GetUrl,HandleError}from\"../../utils/generals\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var CustomerProfilePage=/*#__PURE__*/function(_Component){_inherits(CustomerProfilePage,_Component);var _super=_createSuper(CustomerProfilePage);function CustomerProfilePage(props){var _this;_classCallCheck(this,CustomerProfilePage);_this=_super.call(this,props);_this.getCardTitle=function(){var title=\"\";if(_this.state.stepNumber==0){title=\"اطلاعات هویتی\";}else if(_this.state.stepNumber==1){title=\"روابط نسبی و سببی\";}else if(_this.state.stepNumber==2){title=\"CTR/STR\";}return title;};_this.onChangeStepNumber=function(e){if(_this.state.stepNumber<e){_this.setState({stepNumber:e});}else{_this.setState({stepNumber:e});}};_this.onPersonNumberTypeSelected=function(item){if(item==null||item.value==null||item.value==\"\"){_this.personNumber={Title:null,MaxLength:null};return;}switch(item.value){case constants.PersonNumberType.Real.value:_this.personNumber={Title:\"کد ملی\",MaxLength:10};break;case constants.PersonNumberType.Legal.value:_this.personNumber={Title:\"شناسه ملی\",MaxLength:11};break;case constants.PersonNumberType.Foreign.value:_this.personNumber={Title:\"کد فراگیر اتباع\",MaxLength:12};break;default:_this.personNumber=null;break;}};_this.onSearch=function(){var personNumberTypeId=_this.state.personNumberTypeId;if(personNumberTypeId==null||personNumberTypeId==\"\"){Helpers.DisplayErrorMessage(_this.notificationSystem,null,\"نوع شخص را وارد نمایید\");return false;}var number=_this.state.number;if(number==null||number==\"\"){Helpers.DisplayErrorMessage(_this.notificationSystem,null,\"کد ملی یا شناسه ملی یا کد اتباع را وارد نمایید\");return false;}if(number!=null||number!=\"\")switch(_this.state.personNumberTypeId){case constants.PersonNumberType.Real.value:if(IsRealPersonNationalIdValid(number)==false){Helpers.DisplayErrorMessage(_this.notificationSystem,null,\"کد ملی صحیح نمی باشد\");return false;}if(number.length<10){Helpers.DisplayErrorMessage(_this.notificationSystem,null,\"کد ملی کمتر از 10 کاراکتر می باشد\");return false;}break;case constants.PersonNumberType.Legal.value:if(IsLegalPersonNationalIdValid(number)==false){Helpers.DisplayErrorMessage(_this.notificationSystem,null,\"شناسه ملی صحیح نمی باشد\");return false;}if(number.length<11){Helpers.DisplayErrorMessage(_this.notificationSystem,null,\"شناسه ملی کمتر از 11 کاراکتر می باشد\");return false;}case constants.PersonNumberType.Foreign.value:if(number.length<12){Helpers.DisplayErrorMessage(_this.notificationSystem,null,\"کد فراگیر اتباع کمتر از 12 کاراکتر می باشد\");return false;}break;}Helpers.CallServer(\"/api/amls/Request/RequestSearchCustomerProfile\",{personNumberTypeId:_this.state.personNumberTypeId,number:_this.state.number,accountNumber:_this.state.accountNumber,customerNumber:_this.state.customerNumber},function(successfulResponse){_this.setState({item:successfulResponse});Helpers.DisplaySuccessMessage(_this.notificationSystem,\"درخواست با موفقیت انجام شد ....\");setInterval(function(){window.location.href=GetUrl(\"customerProfileRequestList\",item);},3000);},function(errorResponse){return HandleError(Helpers,_this.notificationSystem,errorResponse);},function(){_this.setState({isLoading:false});},\"POST\");return true;};_this.onRemoveFilter=function(){_this.setState({personNumberTypeId:null,number:null,accountNumber:null,customerNumber:null,updateKey:_this.state.updateKey+1});_this.personNumber={Title:null};};_this.state={updateKey:1,stepNumber:0,isLoading:false,showSearchItem:true,item:{}};_this.PersonTypes=[constants.PersonNumberType.Real,constants.PersonNumberType.Legal,constants.PersonNumberType.Foreign];_this.personNumber={Title:null,MaxLength:null};_this.pageInfo={title:\"پروفایل مشتری\",icon:\"user-search\"};_this.requestId=_this.props.match.params.requestId;_this.notificationSystem=/*#__PURE__*/React.createRef();_this.onRemoveFilter=_this.onRemoveFilter.bind(_assertThisInitialized(_this));return _this;}_createClass(CustomerProfilePage,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(PageMain,{title:this.pageInfo.title,icon:this.pageInfo.icon,isLoading:this.state.isLoading,footerLinks:[{href:\"/\",text:\"صفحه اصلی\"}],children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(DropDown,{context:this,mdCol:4,lgCol:4,name:\"personNumberTypeId\",title:\"\\u0646\\u0648\\u0639 \\u0634\\u062E\\u0635\",options:this.PersonTypes,required:true,changeHandler:function changeHandler(e){return _this2.onPersonNumberTypeSelected(e);},disabled:!this.requestId==null||!this.requestId==\"\"||!this.requestId==undefined}),/*#__PURE__*/_jsx(TextBox,{context:this,name:\"number\",title:this.personNumber.Title==null?\"شماره\":this.personNumber.Title,minLength:1,maxLength:this.personNumber.MaxLength==null?1:this.personNumber.MaxLength,validateHandler:[Helpers.MinMaxLengthValidator],mdCol:4,lgCol:4,readOnly:this.personNumber.Title==null&&(!this.requestId==null||!this.requestId==\"\"||!this.requestId==undefined)}),/*#__PURE__*/_jsx(\"div\",{mdCol:4,lgCol:4}),/*#__PURE__*/_jsx(TextBox,{context:this,name:\"customerNumber\",title:\"\\u0634\\u0645\\u0627\\u0631\\u0647 \\u0645\\u0634\\u062A\\u0631\\u06CC\",minLength:1,maxLength:25,validateHandler:[Helpers.MinMaxLengthValidator],mdCol:4,lgCol:4,readOnly:!this.requestId==null||!this.requestId==\"\"||!this.requestId==undefined}),/*#__PURE__*/_jsx(TextBox,{context:this,name:\"accountNumber\",title:\"\\u0634\\u0645\\u0627\\u0631\\u0647 \\u062D\\u0633\\u0627\\u0628\",minLength:1,maxLength:25,validateHandler:[Helpers.MinMaxLengthValidator],mdCol:4,lgCol:4,readOnly:!this.requestId==null||!this.requestId==\"\"||!this.requestId==undefined}),this.requestId==null||this.requestId==\"\"||this.requestId==undefined?/*#__PURE__*/_jsxs(\"div\",{className:\"text-start col-lg-4 col mt-3 me-4\",children:[/*#__PURE__*/_jsx(Button,{buttonClass:\"btn btn-outline-primary col-lg-1.5 mx-1\",text:\"\\u062F\\u0631\\u062E\\u0648\\u0627\\u0633\\u062A \\u062C\\u0633\\u062A\\u062C\\u0648\",onclick:function onclick(){return _this2.onSearch();}}),/*#__PURE__*/_jsx(Button,{buttonClass:\"btn btn-outline-danger col-lg-1.5 mx-4\",text:\"\\u062D\\u0630\\u0641 \\u0641\\u06CC\\u0644\\u062A\\u0631\",onclick:function onclick(){return _this2.onRemoveFilter();}})]}):null]}),!this.requestId==null||!this.requestId==\"\"||!this.requestId==undefined?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Delimiter,{className:\"mt-2\"}),/*#__PURE__*/_jsx(TabSection,{stepNumber:this.state.stepNumber,onChangeStepNumber:this.onChangeStepNumber,data:[{index:0,title:\"اطلاعات هویتی\"},{index:1,title:\"روابط نسبی و سببی\"},{index:2,title:\"CTR/STR\"}]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tab-content\",id:\"pills-tabContent\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tab-pane fade \".concat(this.state.stepNumber===0?\"show active\":\"\"),id:\"pills-home\",role:\"tabpanel\",\"aria-labelledby\":\"pills-home-tab\",children:[this.state.personNumberTypeId==constants.PersonNumberType.Real(/*#__PURE__*/_jsx(RealCustomerInformationSection,{parentContext:this,parentState:this.state,onChangeStepNumber:this.onChangeStepNumber,personNumberTypeId:this.state.personNumberTypeId,number:this.state.number})),this.state.personNumberTypeId==constants.PersonNumberType.Legal(/*#__PURE__*/_jsx(LegalCustomerInformationSection,{parentContext:this,parentState:this.state,onChangeStepNumber:this.onChangeStepNumber,personNumberTypeId:this.state.personNumberTypeId,number:this.state.number}))]}),/*#__PURE__*/_jsx(\"div\",{className:\"tab-pane fade \".concat(this.state.stepNumber===1?\"show active\":\"\"),id:\"pills-home\",role:\"tabpanel\",\"aria-labelledby\":\"pills-home-tab\",children:/*#__PURE__*/_jsx(CausalAndRelativeRelationshipSection,{parentContext:this,parentState:this.state,onChangeStepNumber:this.onChangeStepNumber,requestId:this.requestId,number:this.state.number,personNumberTypeId:this.state.personNumberTypeId})}),/*#__PURE__*/_jsx(\"div\",{className:\"tab-pane fade \".concat(this.state.stepNumber===2?\"show active\":\"\"),id:\"pills-home\",role:\"tabpanel\",\"aria-labelledby\":\"pills-home-tab\",children:/*#__PURE__*/_jsx(CtrAndStrSection,{parentContext:this,parentState:this.state,onChangeStepNumber:this.onChangeStepNumber,personNumberTypeId:this.state.personNumberTypeId,number:this.state.number,requestId:this.requestId})})]})]}):null]})},this.state.updateKey)}),/*#__PURE__*/_jsx(NotificationSystem,{ref:this.notificationSystem})]});}}]);return CustomerProfilePage;}(Component);export{CustomerProfilePage as default};","map":null,"metadata":{},"sourceType":"module"}