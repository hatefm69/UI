{"ast":null,"code":"var _classCallCheck = require(\"D:/Projects/React/CMI/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\n\nvar _createClass = require(\"D:/Projects/React/CMI/node_modules/@babel/runtime/helpers/createClass.js\").default;\n\nvar _assertThisInitialized = require(\"D:/Projects/React/CMI/node_modules/@babel/runtime/helpers/assertThisInitialized.js\").default;\n\nvar _inherits = require(\"D:/Projects/React/CMI/node_modules/@babel/runtime/helpers/inherits.js\").default;\n\nvar _createSuper = require(\"D:/Projects/React/CMI/node_modules/@babel/runtime/helpers/createSuper.js\").default;\n\nvar React = require('react');\n\nvar PropTypes = require('prop-types');\n\nvar merge = require('object-assign');\n\nvar NotificationContainer = require('./NotificationContainer');\n\nvar Constants = require('./constants');\n\nvar Styles = require('./styles');\n\nvar NotificationSystem = /*#__PURE__*/function (_React$Component) {\n  \"use strict\";\n\n  _inherits(NotificationSystem, _React$Component);\n\n  var _super = _createSuper(NotificationSystem);\n\n  function NotificationSystem() {\n    var _this;\n\n    _classCallCheck(this, NotificationSystem);\n\n    _this = _super.call(this);\n    _this.state = {\n      notifications: []\n    };\n    _this.uid = 3400;\n    _this._isMounted = false;\n    _this.overrideWidth = null;\n    _this.overrideStyle = {};\n    _this.elements = {\n      notification: 'NotificationItem',\n      title: 'Title',\n      messageWrapper: 'MessageWrapper',\n      dismiss: 'Dismiss',\n      action: 'Action',\n      actionWrapper: 'ActionWrapper'\n    };\n    _this.setOverrideStyle = _this.setOverrideStyle.bind(_assertThisInitialized(_this));\n    _this.wrapper = _this.wrapper.bind(_assertThisInitialized(_this));\n    _this.container = _this.container.bind(_assertThisInitialized(_this));\n    _this.byElement = _this.byElement.bind(_assertThisInitialized(_this));\n    _this._didNotificationRemoved = _this._didNotificationRemoved.bind(_assertThisInitialized(_this));\n    _this.addNotification = _this.addNotification.bind(_assertThisInitialized(_this));\n    _this.getNotificationRef = _this.getNotificationRef.bind(_assertThisInitialized(_this));\n    _this.removeNotification = _this.removeNotification.bind(_assertThisInitialized(_this));\n    _this.editNotification = _this.editNotification.bind(_assertThisInitialized(_this));\n    _this.clearNotifications = _this.clearNotifications.bind(_assertThisInitialized(_this));\n    _this._getStyles = {\n      overrideWidth: _this.overrideWidth,\n      overrideStyle: _this.overrideStyle,\n      elements: _this.elements,\n      setOverrideStyle: _this.setOverrideStyle,\n      wrapper: _this.wrapper,\n      container: _this.container,\n      byElement: _this.byElement\n    };\n    return _this;\n  }\n\n  _createClass(NotificationSystem, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.setOverrideStyle(this.props.style);\n      this._isMounted = true;\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this._isMounted = false;\n    }\n  }, {\n    key: \"setOverrideStyle\",\n    value: function setOverrideStyle(style) {\n      this.overrideStyle = style;\n    }\n  }, {\n    key: \"wrapper\",\n    value: function wrapper() {\n      if (!this.overrideStyle) return {};\n      return merge({}, Styles.Wrapper, this.overrideStyle.Wrapper);\n    }\n  }, {\n    key: \"container\",\n    value: function container(position) {\n      var override = this.overrideStyle.Containers || {};\n      if (!this.overrideStyle) return {};\n      this.overrideWidth = Styles.Containers.DefaultStyle.width;\n\n      if (override.DefaultStyle && override.DefaultStyle.width) {\n        this.overrideWidth = override.DefaultStyle.width;\n      }\n\n      if (override[position] && override[position].width) {\n        this.overrideWidth = override[position].width;\n      }\n\n      return merge({}, Styles.Containers.DefaultStyle, Styles.Containers[position], override.DefaultStyle, override[position]);\n    }\n  }, {\n    key: \"byElement\",\n    value: function byElement(element) {\n      var _this2 = this;\n\n      return function (level) {\n        var _element = _this2.elements[element];\n        var override = _this2.overrideStyle[_element] || {};\n        if (!_this2.overrideStyle) return {};\n        return merge({}, Styles[_element].DefaultStyle, Styles[_element][level], override.DefaultStyle, override[level]);\n      };\n    }\n  }, {\n    key: \"_didNotificationRemoved\",\n    value: function _didNotificationRemoved(uid) {\n      var notification;\n      var notifications = this.state.notifications.filter(function (toCheck) {\n        if (toCheck.uid === uid) {\n          notification = toCheck;\n          return false;\n        }\n\n        return true;\n      });\n\n      if (this._isMounted) {\n        this.setState({\n          notifications: notifications\n        });\n      }\n\n      if (notification && notification.onRemove) {\n        notification.onRemove(notification);\n      }\n    }\n  }, {\n    key: \"addNotification\",\n    value: function addNotification(notification) {\n      var _notification = merge({}, Constants.notification, notification);\n\n      var notifications = this.state.notifications;\n      var i;\n\n      if (!_notification.level) {\n        throw new Error('notification level is required.');\n      }\n\n      if (Object.keys(Constants.levels).indexOf(_notification.level) === -1) {\n        throw new Error(\"'\" + _notification.level + \"' is not a valid level.\");\n      } // eslint-disable-next-line\n\n\n      if (isNaN(_notification.autoDismiss)) {\n        throw new Error(\"'autoDismiss' must be a number.\");\n      }\n\n      if (Object.keys(Constants.positions).indexOf(_notification.position) === -1) {\n        throw new Error(\"'\" + _notification.position + \"' is not a valid position.\");\n      } // Some preparations\n\n\n      _notification.position = _notification.position.toLowerCase();\n      _notification.level = _notification.level.toLowerCase();\n      _notification.autoDismiss = parseInt(_notification.autoDismiss, 10);\n      _notification.uid = _notification.uid || this.uid;\n      _notification.ref = 'notification-' + _notification.uid;\n      this.uid += 1; // do not add if the notification already exists based on supplied uid\n\n      for (i = 0; i < notifications.length; i += 1) {\n        if (notifications[i].uid === _notification.uid) {\n          return false;\n        }\n      }\n\n      if (this.props.newOnTop) {\n        notifications.unshift(_notification);\n      } else {\n        notifications.push(_notification);\n      }\n\n      if (typeof _notification.onAdd === 'function') {\n        notification.onAdd(_notification);\n      }\n\n      this.setState({\n        notifications: notifications\n      });\n      return _notification;\n    }\n  }, {\n    key: \"getNotificationRef\",\n    value: function getNotificationRef(notification) {\n      var _this3 = this;\n\n      var foundNotification = null;\n      Object.keys(this.refs).forEach(function (container) {\n        if (container.indexOf('container') > -1) {\n          Object.keys(_this3.refs[container].refs).forEach(function (_notification) {\n            var uid = notification.uid ? notification.uid : notification;\n\n            if (_notification === 'notification-' + uid) {\n              // NOTE: Stop iterating further and return the found notification.\n              // Since UIDs are uniques and there won't be another notification found.\n              foundNotification = _this3.refs[container].refs[_notification];\n            }\n          });\n        }\n      });\n      return foundNotification;\n    }\n  }, {\n    key: \"removeNotification\",\n    value: function removeNotification(notification) {\n      var foundNotification = this.getNotificationRef(notification);\n      return foundNotification && foundNotification._hideNotification();\n    }\n  }, {\n    key: \"editNotification\",\n    value: function editNotification(notification, newNotification) {\n      var foundNotification = null; // NOTE: Find state notification to update by using\n      // `setState` and forcing React to re-render the component.\n\n      var uid = notification.uid ? notification.uid : notification;\n      var newNotifications = this.state.notifications.filter(function (stateNotification) {\n        if (uid === stateNotification.uid) {\n          foundNotification = stateNotification;\n          return false;\n        }\n\n        return true;\n      });\n\n      if (!foundNotification) {\n        return;\n      }\n\n      newNotifications.push(merge({}, foundNotification, newNotification));\n      this.setState({\n        notifications: newNotifications\n      });\n    }\n  }, {\n    key: \"clearNotifications\",\n    value: function clearNotifications() {\n      var _this4 = this;\n\n      Object.keys(this.refs).forEach(function (container) {\n        if (container.indexOf('container') > -1) {\n          Object.keys(_this4.refs[container].refs).forEach(function (_notification) {\n            _this4.refs[container].refs[_notification]._hideNotification();\n          });\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      var containers = null;\n      var notifications = this.state.notifications;\n\n      if (notifications.length) {\n        containers = Object.keys(Constants.positions).map(function (position) {\n          var _notifications = notifications.filter(function (notification) {\n            return position === notification.position;\n          });\n\n          if (!_notifications.length) {\n            return null;\n          }\n\n          return React.createElement(NotificationContainer, {\n            ref: 'container-' + position,\n            key: position,\n            position: position,\n            notifications: _notifications,\n            getStyles: _this5._getStyles,\n            onRemove: _this5._didNotificationRemoved,\n            noAnimation: _this5.props.noAnimation,\n            allowHTML: _this5.props.allowHTML\n          });\n        });\n      }\n\n      return React.createElement(\"div\", {\n        className: \"notifications-wrapper\",\n        style: this.wrapper()\n      }, containers);\n    }\n  }]);\n\n  return NotificationSystem;\n}(React.Component);\n\nNotificationSystem.propTypes = {\n  style: PropTypes.oneOfType([PropTypes.bool, PropTypes.object]),\n  noAnimation: PropTypes.bool,\n  allowHTML: PropTypes.bool,\n  newOnTop: PropTypes.bool\n};\nNotificationSystem.defaultProps = {\n  style: {},\n  noAnimation: false,\n  allowHTML: false,\n  newOnTop: false\n};\nmodule.exports = NotificationSystem;","map":null,"metadata":{},"sourceType":"script"}