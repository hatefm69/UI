{"ast":null,"code":"import _classCallCheck from\"D:/Projects/React/AMLS/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/Projects/React/AMLS/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"D:/Projects/React/AMLS/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"D:/Projects/React/AMLS/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"D:/Projects/React/AMLS/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import{Helpers,PageMain,SimpleGrid,TextBox,DatePicker,DropDown,Delimiter}from\"core\";import React,{Component}from\"react\";import NotificationSystem from\"react-notification-system\";import{IsLegalPersonNationalIdValid,IsRealPersonNationalIdValid}from\"../../utils/nationalIdentification\";import Constants from\"../../utils/constants\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var btnWidth={\"width\":\"90px\"};var BranchStrListPage=/*#__PURE__*/function(_Component){_inherits(BranchStrListPage,_Component);var _super=_createSuper(BranchStrListPage);function BranchStrListPage(props){var _this;_classCallCheck(this,BranchStrListPage);_this=_super.call(this,props);_this.onPersonNumberTypeIdChange=function(e){var title='کد ملی / شناسه ملی / کد فراگیر اتباع';var length=0;if(e.value==Constants.PersonNumberType.Real.value){title='کد ملی';length=10;}else if(e.value==Constants.PersonNumberType.Legal.value){title='شناسه ملی';length=11;}else if(e.value==Constants.PersonNumberType.Foreign.value){title='کد فراگیر اتباع';length=12;}_this.setState({numberTitle:title,numberMaxLength:length,numberIsReadOnly:false});};_this.PersonTypes=[Constants.PersonNumberType.Real,Constants.PersonNumberType.Legal,Constants.PersonNumberType.Foreign];_this.state={isLoading:false,numberTitle:\"کد ملی / شناسه ملی / کد فراگیر اتباع\",numberMaxLength:10,numberIsReadOnly:true,gridUpdate:1,filterUpdate:1};_this.notificationSystem=/*#__PURE__*/React.createRef();_this.searchStr=_this.searchStr.bind(_assertThisInitialized(_this));_this.downLoadStr=_this.downLoadStr.bind(_assertThisInitialized(_this));_this.resetFilters=_this.resetFilters.bind(_assertThisInitialized(_this));return _this;}_createClass(BranchStrListPage,[{key:\"searchStr\",value:function searchStr(){var personNumberTypeId=this.state.personNumberTypeId;var number=this.state.number;if(personNumberTypeId==null||personNumberTypeId==\"\"||number==null||number==\"\"){this.setState({gridUpdate:this.state.gridUpdate+1});return;}if(personNumberTypeId==Constants.PersonNumberType.Real.value&&!IsRealPersonNationalIdValid(number)){Helpers.DisplayErrorMessage(this.notificationSystem,null,\"کد ملی معتبر نیست\");return;}if(personNumberTypeId==Constants.PersonNumberType.Legal.value&&!IsLegalPersonNationalIdValid(number)){Helpers.DisplayErrorMessage(this.notificationSystem,null,\"شناسه ملی معتبر نیست\");return;}this.setState({gridUpdate:this.state.gridUpdate+1});}},{key:\"returnValue\",value:function returnValue(value){return value==null||value==\"\"?\"**\":value;}},{key:\"downLoadStr\",value:function downLoadStr(){var params=\"/\".concat(this.returnValue(this.state.fromTransactionDate),\"/\").concat(this.returnValue(this.state.toTransactionDate),\"/\").concat(this.returnValue(this.state.customerNumber),\"/\").concat(this.returnValue(this.state.accountNumber),\"/\").concat(this.returnValue(this.state.personNumberTypeId),\"/\").concat(this.returnValue(this.state.number));var wm=window.open(\"/api/amls/bi/Receive_STR_/DownloadReceive_STR\".concat(params),'_self');wm.focus();wm.onblur=function(){wm.close();};}},{key:\"resetFilters\",value:function resetFilters(){this.setState({fromTransactionDate:null,toTransactionDate:null,customerNumber:null,accountNumber:null,personNumberTypeId:null,number:null,filterUpdate:this.state.filterUpdate+1});}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(PageMain,{context:this,title:\"\\u06AF\\u0632\\u0627\\u0631\\u0634 STR\",icon:\"list-search\",isLoading:this.state.isLoading,footerLinks:[{href:\"/\",text:\"صفحه اصلی\"}],children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-4\",children:/*#__PURE__*/_jsx(DatePicker,{context:this,mdCol:12,lgCol:12,name:\"fromTransactionDate\",title:\"\\u062A\\u0627\\u0631\\u06CC\\u062E \\u062A\\u0631\\u0627\\u06A9\\u0646\\u0634 \\u0627\\u0632\",useEpoch:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-4\",children:/*#__PURE__*/_jsx(DatePicker,{context:this,mdCol:12,lgCol:12,name:\"toTransactionDate\",title:\"\\u062A\\u0627\\u0631\\u06CC\\u062E \\u062A\\u0631\\u0627\\u06A9\\u0646\\u0634 \\u062A\\u0627\",useEpoch:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-4\",children:/*#__PURE__*/_jsx(TextBox,{context:this,mdCol:12,lgCol:12,name:\"customerNumber\",title:\"\\u0634\\u0645\\u0627\\u0631\\u0647 \\u0645\\u0634\\u062A\\u0631\\u06CC\",readOnly:true,minLength:1,maxLength:25})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-4\",children:/*#__PURE__*/_jsx(TextBox,{context:this,mdCol:12,lgCol:12,name:\"accountNumber\",title:\"\\u0634\\u0645\\u0627\\u0631\\u0647 \\u062D\\u0633\\u0627\\u0628\",minLength:1,maxLength:25})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-4\",children:/*#__PURE__*/_jsx(DropDown,{context:this,mdCol:12,lgCol:12,name:\"personNumberTypeId\",title:\"\\u0646\\u0648\\u0639 \\u0634\\u062E\\u0635\",options:this.PersonTypes,changeHandler:this.onPersonNumberTypeIdChange})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-4\",children:/*#__PURE__*/_jsx(TextBox,{context:this,mdCol:12,lgCol:12,name:\"number\",title:this.state.numberTitle,minLength:1,maxLength:this.state.numberMaxLength,readOnly:this.state.numberIsReadOnly})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-1 p-2\",children:/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"d-print-none btn btn-success me-auto\",style:btnWidth,onClick:this.searchStr,children:[/*#__PURE__*/_jsx(\"i\",{className:\"me-1 ti ti-filter\"}),\"\\u062C\\u0633\\u062A\\u062C\\u0648\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-1 p-2\",children:/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"d-print-none btn btn-primary me-auto\",style:btnWidth,onClick:this.downLoadStr,children:[/*#__PURE__*/_jsx(\"i\",{className:\"me-1 ti ti-download\"}),\"\\u062F\\u0627\\u0646\\u0644\\u0648\\u062F\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-9\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-1 p-2\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"d-print-none btn btn-default me-auto\",style:btnWidth,onClick:this.resetFilters,children:\"\\u062D\\u0630\\u0641 \\u0641\\u06CC\\u0644\\u062A\\u0631\"})})]}),/*#__PURE__*/_jsx(Delimiter,{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(SimpleGrid,{listApiUrl:\"/api/amls/bi/Receive_STR_/SearchReceive_STR\",context:this,title:\"\\u06AF\\u0632\\u0627\\u0631\\u0634 STR\",dataKey:\"id\",name:\"grSrtReport\",lgCol:12,mdCol:12,notificationSystem:this.notificationSystem,minHeightTableWrapper:Constants.MinGridHeight,enableAutoFetch:true,extraItemsSentToFetchData:{FromTransactionDate:this.state.fromTransactionDate,ToTransactionDate:this.state.toTransactionDate,CustomerNumber:this.state.customerNumber,AccountNumber:this.state.accountNumber,PersonNumberTypeId:this.state.personNumberTypeId,Number:this.state.number},headers:[//{ type: \"text\", title: \"شناسه\", name: \"Id\" },\n{type:\"text\",title:\"نام بانک\",name:\"bankName\"},{type:\"text\",title:\"نام شعبه افتتاح  کننده\",name:\"openingBranchName\"},{type:\"text\",title:\"کد شعبه افتتاح کننده\",name:\"openingBranchCode\"},{type:\"text\",title:\"نام استان شعبه\",name:\"branchProvinceName\"},{type:\"text\",title:\"نام شهر شعبه\",name:\"branchCityName\"},{type:\"text\",title:\"تاریخ ترکنش\",name:\"transactionDate\"},{type:\"text\",title:\"نام صاحب حساب\",name:\"ownerAccountFirstName\"},{type:\"text\",title:\"نام خانوادگی صاحب حساب\",name:\"ownerAccountLastName\"},{type:\"text\",title:\"کد ملی صاحب حساب\",name:\"ownerAccountNationalCode\"},{type:\"text\",title:\"شماره شناسنامه صاحب حساب\",name:\"ownerAccountBirthCertificateNumber\"},{type:\"text\",title:\"نام پدر صاحب حساب\",name:\"ownerAccountFatherName\"},{type:\"text\",title:\"نوع تراکنش\",name:\"transactionType\"},{type:\"text\",title:\"نوع وجه\",name:\"currencyType\"},{type:\"text\",title:\"نوع حساب\",name:\"accountTypeName\"},{type:\"text\",title:\"شماره حساب\",name:\"accountNumber\"},{type:\"text\",title:\"نام بانک طرف حساب\",name:\"accountBanckName\"},{type:\"text\",title:\"مبلغ\",name:\"amount\"},{type:\"text\",title:\"ارز\",name:\"currency\"},{type:\"text\",title:\"تاریخ چک\",name:\"checkDate\"},{type:\"text\",title:\"سری چک\",name:\"checkSeries\"},{type:\"text\",title:\"شماره سریال چک\",name:\"checkSerialNumber\"},{type:\"text\",title:\"نوع چک\",name:\"checkType\"},{type:\"text\",title:\"نام بانک چک\",name:\"checkBankName\"},{type:\"text\",title:\"نام شعبه چک\",name:\"checkBranchName\"},{type:\"text\",title:\"کد شعبه چک\",name:\"checkBranchCode\"},{type:\"text\",title:\"شماره حساب جاری\",name:\"currentAccountNumber\"},{type:\"text\",title:\"نام چک\",name:\"checkName\"},{type:\"text\",title:\"مبلغ چک\",name:\"checkAmount\"},{type:\"text\",title:\"نوع ارز چک\",name:\"checkCurrencyType\"},{type:\"text\",title:\"پرداخت کننده چک\",name:\"checkPayer\"},{type:\"text\",title:\"امضا کننده چک\",name:\"checkSigner\"},{type:\"text\",title:\"گیرنده چک\",name:\"checkBuyer\"},{type:\"text\",title:\"نام\",name:\"firstName\"},{type:\"text\",title:\"نام خانوادگی\",name:\"lastName\"},{type:\"text\",title:\"نام پدر\",name:\"fatherName\"},{type:\"text\",title:\"شناسه ملی\",name:\"nationalCode\"},{type:\"text\",title:\"شمار شناسنامه\",name:\"birthCertificateNumber\"},{type:\"text\",title:\"تاریخ تولد\",name:\"birthDate\"},{type:\"text\",title:\"استان\",name:\"provinceName\"},{type:\"text\",title:\"شهر\",name:\"cityName\"},{type:\"text\",title:\"آدرس\",name:\"address\"},{type:\"text\",title:\"کد پستی\",name:\"postalCode\"},{type:\"text\",title:\"تلفن\",name:\"telephoneNumber\"},{type:\"text\",title:\"موبایل\",name:\"cellphneNumber\"},{type:\"text\",title:\"شغل\",name:\"jobName\"},{type:\"text\",title:\"آدرس محل کار\",name:\"jobAddress\"},{type:\"text\",title:\"کد پستی محل کار\",name:\"jobPostalCode\"},{type:\"text\",title:\"تلفن محل کار\",name:\"jobTelephoneNumber\"},{type:\"text\",title:\"توضیحات\",name:\"describtion\"},{type:\"text\",title:\"شماره STR\",name:\"stR_Number\"}]},this.state.gridUpdate)]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-footer\",children:/*#__PURE__*/_jsx(\"div\",{className:\"d-flex\",children:/*#__PURE__*/_jsxs(\"a\",{className:\"btn btn-outline-secendery ms-auto\",onClick:function onClick(e){return _this2.Backward(e);},href:\"/\",title:\"\\u0628\\u0627\\u0632\\u06AF\\u0634\\u062A \\u0628\\u0647 \\u0635\\u0641\\u062D\\u0647 \\u0642\\u0628\\u0644\",children:[\"\\u0628\\u0627\\u0632\\u06AF\\u0634\\u062A\",/*#__PURE__*/_jsx(\"i\",{className:\"ti ti-arrow-left ms-1\"})]})})})]})},this.state.filterUpdate),/*#__PURE__*/_jsx(NotificationSystem,{ref:this.notificationSystem})]});}}]);return BranchStrListPage;}(Component);export{BranchStrListPage as default};","map":null,"metadata":{},"sourceType":"module"}