{"ast":null,"code":"function GetNationalId(nationalId, length) {\n  if (nationalId == null) return null;\n  if (typeof nationalId != \"string\" || nationalId.length != length) return null;\n  var digits = [];\n\n  for (var index = 0; index < nationalId.length; index++) {\n    var digit = nationalId[index];\n    if (isNaN(digit)) return null;\n    const digitSet = new Set(nationalId);\n    if (digitSet.size === 1) return null;else digits.push(parseInt(digit));\n  }\n\n  return digits;\n}\n\n_c = GetNationalId;\nexport function IsLegalPersonNationalIdValid(nationalId) {\n  var digits = GetNationalId(nationalId, 11);\n  if (digits == null) return false;\n  var ratio1 = digits[9] + 2;\n  var ratioes = [29, 27, 23, 19, 17];\n  var sum = 0;\n\n  for (var index = 0; index < digits.length - 1; index++) sum += (ratio1 + digits[index]) * ratioes[index % 5];\n\n  sum %= digits.length;\n  if (sum == 10) sum = 0;\n  return sum == digits[digits.length - 1];\n}\n_c2 = IsLegalPersonNationalIdValid;\nexport function IsRealPersonNationalIdValid(nationalId) {\n  var digits = GetNationalId(nationalId, 10);\n  if (digits == null) return false;\n  var sum = 0;\n\n  for (var index = 0; index < digits.length - 1; index++) sum += digits[index] * (10 - index);\n\n  sum %= 11;\n  if (sum >= 2) sum = 11 - sum;\n  return sum == digits[digits.length - 1];\n}\n_c3 = IsRealPersonNationalIdValid;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"GetNationalId\");\n$RefreshReg$(_c2, \"IsLegalPersonNationalIdValid\");\n$RefreshReg$(_c3, \"IsRealPersonNationalIdValid\");","map":{"version":3,"names":["GetNationalId","nationalId","length","digits","index","digit","isNaN","digitSet","Set","size","push","parseInt","IsLegalPersonNationalIdValid","ratio1","ratioes","sum","IsRealPersonNationalIdValid"],"sources":["D:/Projects/React/AMLS/src/utils/nationalIdentification.js"],"sourcesContent":["function GetNationalId(nationalId, length) {\r\n  if (nationalId == null) return null;\r\n  if (typeof nationalId != \"string\" || nationalId.length != length) return null;\r\n  var digits = [];\r\n\r\n  for (var index = 0; index < nationalId.length; index++) {\r\n    var digit = nationalId[index];\r\n\r\n    if (isNaN(digit)) return null;\r\n\r\n    const digitSet = new Set(nationalId);\r\n    if (digitSet.size === 1) return null;\r\n    else digits.push(parseInt(digit));\r\n  }\r\n  return digits;\r\n}\r\n\r\nexport function IsLegalPersonNationalIdValid(nationalId) {\r\n  var digits = GetNationalId(nationalId, 11);\r\n\r\n  if (digits == null) return false;\r\n  var ratio1 = digits[9] + 2;\r\n  var ratioes = [29, 27, 23, 19, 17];\r\n  var sum = 0;\r\n\r\n  for (var index = 0; index < digits.length - 1; index++)\r\n    sum += (ratio1 + digits[index]) * ratioes[index % 5];\r\n\r\n  sum %= digits.length;\r\n  if (sum == 10) sum = 0;\r\n  return sum == digits[digits.length - 1];\r\n}\r\n\r\nexport function IsRealPersonNationalIdValid(nationalId) {\r\n  var digits = GetNationalId(nationalId, 10);\r\n\r\n  if (digits == null) return false;\r\n  var sum = 0;\r\n\r\n  for (var index = 0; index < digits.length - 1; index++)\r\n    sum += digits[index] * (10 - index);\r\n  sum %= 11;\r\n  if (sum >= 2) sum = 11 - sum;\r\n  return sum == digits[digits.length - 1];\r\n}\r\n"],"mappings":"AAAA,SAASA,aAAT,CAAuBC,UAAvB,EAAmCC,MAAnC,EAA2C;EACzC,IAAID,UAAU,IAAI,IAAlB,EAAwB,OAAO,IAAP;EACxB,IAAI,OAAOA,UAAP,IAAqB,QAArB,IAAiCA,UAAU,CAACC,MAAX,IAAqBA,MAA1D,EAAkE,OAAO,IAAP;EAClE,IAAIC,MAAM,GAAG,EAAb;;EAEA,KAAK,IAAIC,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGH,UAAU,CAACC,MAAvC,EAA+CE,KAAK,EAApD,EAAwD;IACtD,IAAIC,KAAK,GAAGJ,UAAU,CAACG,KAAD,CAAtB;IAEA,IAAIE,KAAK,CAACD,KAAD,CAAT,EAAkB,OAAO,IAAP;IAElB,MAAME,QAAQ,GAAG,IAAIC,GAAJ,CAAQP,UAAR,CAAjB;IACA,IAAIM,QAAQ,CAACE,IAAT,KAAkB,CAAtB,EAAyB,OAAO,IAAP,CAAzB,KACKN,MAAM,CAACO,IAAP,CAAYC,QAAQ,CAACN,KAAD,CAApB;EACN;;EACD,OAAOF,MAAP;AACD;;KAfQH,a;AAiBT,OAAO,SAASY,4BAAT,CAAsCX,UAAtC,EAAkD;EACvD,IAAIE,MAAM,GAAGH,aAAa,CAACC,UAAD,EAAa,EAAb,CAA1B;EAEA,IAAIE,MAAM,IAAI,IAAd,EAAoB,OAAO,KAAP;EACpB,IAAIU,MAAM,GAAGV,MAAM,CAAC,CAAD,CAAN,GAAY,CAAzB;EACA,IAAIW,OAAO,GAAG,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,EAAa,EAAb,EAAiB,EAAjB,CAAd;EACA,IAAIC,GAAG,GAAG,CAAV;;EAEA,KAAK,IAAIX,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGD,MAAM,CAACD,MAAP,GAAgB,CAA5C,EAA+CE,KAAK,EAApD,EACEW,GAAG,IAAI,CAACF,MAAM,GAAGV,MAAM,CAACC,KAAD,CAAhB,IAA2BU,OAAO,CAACV,KAAK,GAAG,CAAT,CAAzC;;EAEFW,GAAG,IAAIZ,MAAM,CAACD,MAAd;EACA,IAAIa,GAAG,IAAI,EAAX,EAAeA,GAAG,GAAG,CAAN;EACf,OAAOA,GAAG,IAAIZ,MAAM,CAACA,MAAM,CAACD,MAAP,GAAgB,CAAjB,CAApB;AACD;MAdeU,4B;AAgBhB,OAAO,SAASI,2BAAT,CAAqCf,UAArC,EAAiD;EACtD,IAAIE,MAAM,GAAGH,aAAa,CAACC,UAAD,EAAa,EAAb,CAA1B;EAEA,IAAIE,MAAM,IAAI,IAAd,EAAoB,OAAO,KAAP;EACpB,IAAIY,GAAG,GAAG,CAAV;;EAEA,KAAK,IAAIX,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGD,MAAM,CAACD,MAAP,GAAgB,CAA5C,EAA+CE,KAAK,EAApD,EACEW,GAAG,IAAIZ,MAAM,CAACC,KAAD,CAAN,IAAiB,KAAKA,KAAtB,CAAP;;EACFW,GAAG,IAAI,EAAP;EACA,IAAIA,GAAG,IAAI,CAAX,EAAcA,GAAG,GAAG,KAAKA,GAAX;EACd,OAAOA,GAAG,IAAIZ,MAAM,CAACA,MAAM,CAACD,MAAP,GAAgB,CAAjB,CAApB;AACD;MAXec,2B"},"metadata":{},"sourceType":"module"}