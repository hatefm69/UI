{"ast":null,"code":"var _jsxFileName = \"D:\\\\Projects\\\\React\\\\AMLS\\\\src\\\\sections\\\\regionInfoSection.js\";\nimport { Component } from \"react\";\nimport React from \"react\";\nimport { AutoComplete, Card, DropDown, Helpers, CheckBox, TextBox } from \"core\";\nimport NotificationSystem from \"react-notification-system\";\nimport { HandleError } from \"../utils/generals\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default class RegionInfoSection extends Component {\n  constructor(props) {\n    var state = {\n      updateKey: 1,\n      isActive: false,\n      provinceUpdated: 1\n    };\n    super(props);\n\n    if (this.props.record != null) {\n      state['id'] = this.props.record.id;\n      state['cityCode'] = this.props.record.cityCode;\n      state['regionTypeId'] = this.props.record.regionTypeId.toString();\n      state['isActive'] = this.props.record.isActive;\n    }\n\n    this.state = state;\n    this.notificationSystem = /*#__PURE__*/React.createRef();\n    this.onSubmitSuccess = this.onSubmitSuccess.bind(this);\n    this.onCityChanged = this.onCityChanged.bind(this);\n  } // Events.\n\n\n  onSubmitSuccess(response) {\n    if (this.props.record == null) this.setState({\n      regionCode: null,\n      regionTypeId: null,\n      isActive: null,\n      updateKey: this.state.updateKey + 1\n    });\n    Helpers.DisplaySuccessMessage(this.notificationSystem, response.message);\n  }\n\n  onCityChanged(e) {\n    if (e == null || e.value == null || e.value == \"\") {\n      this.setState({\n        provinceName: \"نا مشخص\",\n        provinceUpdated: this.state.provinceUpdated + 1\n      });\n      return;\n    }\n\n    Helpers.CallServer('/api/amls/RegionInfo/GetCityProvince/' + e.value, {}, successfulResponse => {\n      var provinceName = successfulResponse.data == \"نا مشخص\" ? [] : successfulResponse.data.province.name;\n      this.setState({\n        provinceName: provinceName,\n        provinceUpdated: this.state.provinceUpdated + 1\n      });\n    }, errorResponse => HandleError(Helpers, this.notificationSystem, errorResponse), () => {\n      this.setState({\n        isLoading: false\n      });\n    }, 'GET');\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Card, {\n        context: this,\n        title: this.props.record == null ? \"جزئیات افزودن مناطق\" : \"جزئیات ویرایش مناطق\",\n        name: \"crdRegionInfo\",\n        statusColor: \"primary\",\n        hasDefaultSaveButton: true,\n        submitUrl: this.props.record == null ? \"/api/amls/RegionInfo/AddRegionInfo\" : \"/api/amls/RegionInfo/UpdateRegionInfo\",\n        hasBackButton: true,\n        icon: \"building\",\n        onSubmitError: error => HandleError(Helpers, this.notificationSystem, error),\n        onSubmitSuccess: this.onSubmitSuccess,\n        updateKey: this.state.updateKey,\n        children: [/*#__PURE__*/_jsxDEV(DropDown, {\n          context: this,\n          name: \"regionTypeId\",\n          title: \"\\u0646\\u0648\\u0639 \\u0645\\u0646\\u0637\\u0642\\u0647\",\n          options: this.props.regionTypes,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(AutoComplete, {\n          context: this,\n          name: \"cityCode\",\n          title: \"\\u0634\\u0647\\u0631\",\n          notificationSystem: this.notificationSystem,\n          required: true,\n          remoteUrl: \"/api/amls/RegionInfo/SearchCities\",\n          changeHandler: this.onCityChanged,\n          externalData: this.props.record == null ? [] : [{\n            label: this.props.record.cityName,\n            value: this.props.record.cityCode\n          }]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(TextBox, {\n          context: this,\n          name: \"provinceName\",\n          title: \"\\u0646\\u0627\\u0645 \\u0627\\u0633\\u062A\\u0627\\u0646\",\n          readOnly: true\n        }, this.state.provinceUpdated, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(CheckBox, {\n          context: this,\n          name: \"isActive\",\n          title: \"\\u0641\\u0639\\u0627\\u0644\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(NotificationSystem, {\n        ref: this.notificationSystem\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true);\n  }\n\n}","map":{"version":3,"names":["Component","React","AutoComplete","Card","DropDown","Helpers","CheckBox","TextBox","NotificationSystem","HandleError","RegionInfoSection","constructor","props","state","updateKey","isActive","provinceUpdated","record","id","cityCode","regionTypeId","toString","notificationSystem","createRef","onSubmitSuccess","bind","onCityChanged","response","setState","regionCode","DisplaySuccessMessage","message","e","value","provinceName","CallServer","successfulResponse","data","province","name","errorResponse","isLoading","render","error","regionTypes","label","cityName"],"sources":["D:/Projects/React/AMLS/src/sections/regionInfoSection.js"],"sourcesContent":["import { Component } from \"react\";\r\nimport React from \"react\";\r\nimport { AutoComplete, Card, DropDown, Helpers, CheckBox, TextBox } from \"core\";\r\nimport NotificationSystem from \"react-notification-system\";\r\nimport { HandleError } from \"../utils/generals\"\r\n\r\nexport default class RegionInfoSection extends Component\r\n{\r\n    constructor(props)\r\n    {\r\n        var state = {\r\n            updateKey: 1,\r\n            isActive: false,\r\n            provinceUpdated: 1\r\n        };\r\n\r\n        super(props);\r\n\r\n        if(this.props.record != null)\r\n        {\r\n            state['id'] = this.props.record.id;\r\n            state['cityCode'] = this.props.record.cityCode;\r\n            state['regionTypeId'] = this.props.record.regionTypeId.toString();\r\n            state['isActive'] = this.props.record.isActive;\r\n        }\r\n        this.state = state;\r\n\r\n        this.notificationSystem = React.createRef();\r\n\r\n        this.onSubmitSuccess = this.onSubmitSuccess.bind(this);\r\n        this.onCityChanged = this.onCityChanged.bind(this);\r\n    }\r\n\r\n    // Events.\r\n    onSubmitSuccess(response)\r\n    {\r\n        if(this.props.record == null)\r\n            this.setState({\r\n                regionCode: null,\r\n                regionTypeId: null,\r\n                isActive: null,\r\n                updateKey: this.state.updateKey + 1\r\n            });\r\n        Helpers.DisplaySuccessMessage(this.notificationSystem, response.message);\r\n    }\r\n\r\n    onCityChanged(e)\r\n    {\r\n        if(e == null || e.value == null || e.value == \"\")\r\n        {\r\n            this.setState({\r\n                provinceName: \"نا مشخص\",\r\n                provinceUpdated: this.state.provinceUpdated + 1\r\n            });\r\n            return;\r\n        }\r\n\r\n        Helpers.CallServer('/api/amls/RegionInfo/GetCityProvince/' + e.value,\r\n            { },\r\n            successfulResponse =>\r\n            {\r\n                var provinceName = (successfulResponse.data == \"نا مشخص\" ? [] : successfulResponse.data.province.name);\r\n\r\n                this.setState({\r\n                    provinceName: provinceName,\r\n                    provinceUpdated: this.state.provinceUpdated + 1\r\n                });\r\n            },\r\n            errorResponse => HandleError(Helpers, this.notificationSystem, errorResponse),\r\n            () => { this.setState({ isLoading: false }) }, 'GET');\r\n    }\r\n\r\n    render()\r\n    {\r\n        return (\r\n            <>\r\n                <Card context={ this } title={ this.props.record == null ? \"جزئیات افزودن مناطق\" : \"جزئیات ویرایش مناطق\" } name=\"crdRegionInfo\" statusColor=\"primary\" hasDefaultSaveButton\r\n                    submitUrl={ this.props.record == null ? \"/api/amls/RegionInfo/AddRegionInfo\" : \"/api/amls/RegionInfo/UpdateRegionInfo\" } hasBackButton icon=\"building\"\r\n                    onSubmitError={(error) => HandleError(Helpers, this.notificationSystem, error)} onSubmitSuccess={ this.onSubmitSuccess } updateKey={ this.state.updateKey }>\r\n                    <DropDown context={ this } name=\"regionTypeId\" title=\"نوع منطقه\" options={ this.props.regionTypes } required />\r\n                    <AutoComplete context={ this } name=\"cityCode\" title=\"شهر\" notificationSystem={ this.notificationSystem } required\r\n                        remoteUrl=\"/api/amls/RegionInfo/SearchCities\" changeHandler={ this.onCityChanged }\r\n                        externalData={ this.props.record == null\r\n                            ? []\r\n                            : [{\r\n                                label: this.props.record.cityName,\r\n                                value: this.props.record.cityCode\r\n                            }]}\r\n                            />\r\n                    <TextBox context={ this } name=\"provinceName\" title=\"نام استان\" readOnly key={ this.state.provinceUpdated } />\r\n                    <CheckBox context={ this } name=\"isActive\" title=\"فعال\" />\r\n                </Card>\r\n                <NotificationSystem ref={ this.notificationSystem } />\r\n            </>\r\n        );\r\n    }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}