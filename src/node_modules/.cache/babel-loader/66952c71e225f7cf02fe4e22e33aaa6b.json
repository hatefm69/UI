{"ast":null,"code":"var _jsxFileName = \"D:\\\\Projects\\\\React\\\\AMLS\\\\src\\\\sections\\\\basePage\\\\formSection.js\";\nimport React from 'react';\nimport { Card, TextBox, DropDown, Helpers } from \"core\";\nimport NotificationSystem from 'react-notification-system';\nimport { GetUrl, HandleError } from '../../utils/generals';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default class FormSection extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      YesNoStates: null,\n      updateKey: 1\n    };\n    this.notificationSystem = /*#__PURE__*/React.createRef();\n    this.onSubmitError = this.onSubmitError.bind(this);\n    this.onSubmitSuccess = this.onSubmitSuccess.bind(this);\n  }\n\n  componentDidMount() {\n    Helpers.CallServer('/api/FRQST/DropDown/GetDropDownYesNoStates/', {}, successfulResponse => {\n      this.setState({\n        YesNoStates: successfulResponse.data\n      });\n    }, errorResponse => {\n      return HandleError(Helpers, this.notificationSystem, errorResponse);\n    }, () => {\n      console.log('Done');\n    }, 'GET');\n  }\n\n  onSubmitError(er) {\n    return HandleError(Helpers, this.notificationSystem, er);\n  }\n\n  onSubmitSuccess() {\n    if (this.props.formData == null) {\n      var state = {\n        \"name\": \"\",\n        \"isMulti\": \"\",\n        \"isRequired\": \"\",\n        \"order\": \"\",\n        updateKey: this.state.updateKey + 1\n      };\n      this.setState(state);\n    }\n\n    Helpers.DisplaySuccessMessage(this.notificationSystem, 'اطلاعات با موفقیت ذخیره شد');\n    return true;\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Card, {\n        context: this,\n        title: \"\\u062C\\u0632\\u0626\\u06CC\\u0627\\u062A \\u0641\\u0631\\u0645 \\u067E\\u0648\\u06CC\\u0627\",\n        icon: \"file-database\",\n        hasBackButton: true,\n        hasDefaultSaveButton: true,\n        submitUrl: this.props.formData == null ? '/api/FRQST/Form/SaveForm' : '/api/FRQST/Form/EditForm',\n        extraDataToSend: {\n          id: this.props.formData == null ? null : this.props.formData.id\n        },\n        statusColor: \"success\",\n        onSubmitError: this.onSubmitError,\n        onSubmitSuccess: this.onSubmitSuccess,\n        updateKey: this.state.updateKey,\n        topButtons: [{\n          title: \"لیست فرم های پویا\",\n          icon: \"list-details\",\n          color: \"outline-success\",\n          url: GetUrl(\"formListPage\")\n        }],\n        children: [/*#__PURE__*/_jsxDEV(TextBox, {\n          context: this,\n          name: \"name\",\n          title: \"\\u0646\\u0627\\u0645 \\u0641\\u0631\\u0645\",\n          required: true,\n          maxLength: 64,\n          initialValue: this.props.formData == null ? null : this.props.formData.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(DropDown, {\n          context: this,\n          name: \"isMulti\",\n          title: \"\\u0686\\u0646\\u062F \\u0641\\u0631\\u0645\\u06CC\",\n          options: this.state.YesNoStates == null ? [] : this.state.YesNoStates,\n          required: true,\n          initialValue: this.props.formData == null ? null : this.props.formData.isMulti\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(DropDown, {\n          context: this,\n          name: \"isRequired\",\n          title: \"\\u0627\\u062C\\u0628\\u0627\\u0631\\u06CC\",\n          options: this.state.YesNoStates == null ? [] : this.state.YesNoStates,\n          required: true,\n          initialValue: this.props.formData == null ? null : this.props.formData.isRequired\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(TextBox, {\n          context: this,\n          name: \"order\",\n          title: \"\\u062A\\u0631\\u062A\\u06CC\\u0628 \\u0646\\u0645\\u0627\\u06CC\\u0634\",\n          required: true,\n          validateHandler: Helpers.NumberTypeValidator,\n          initialValue: this.props.formData == null ? null : this.props.formData.order\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(TextBox, {\n          context: this,\n          name: \"monthCount\",\n          title: \"\\u0627\\u0639\\u062A\\u0628\\u0627\\u0631 \\u0641\\u0631\\u0645 (\\u062A\\u0639\\u062F\\u0627\\u062F \\u0645\\u0627\\u0647)\",\n          minLength: 1,\n          maxLength: 3,\n          validateHandler: [Helpers.NumberTypeValidator, Helpers.MinMaxLengthValidator],\n          initialValue: this.props.formData == null ? null : this.props.formData.monthCount\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(NotificationSystem, {\n        ref: this.notificationSystem\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true);\n  }\n\n}","map":{"version":3,"names":["React","Card","TextBox","DropDown","Helpers","NotificationSystem","GetUrl","HandleError","FormSection","Component","constructor","props","state","YesNoStates","updateKey","notificationSystem","createRef","onSubmitError","bind","onSubmitSuccess","componentDidMount","CallServer","successfulResponse","setState","data","errorResponse","console","log","er","formData","DisplaySuccessMessage","render","id","title","icon","color","url","name","isMulti","isRequired","NumberTypeValidator","order","MinMaxLengthValidator","monthCount"],"sources":["D:/Projects/React/AMLS/src/sections/basePage/formSection.js"],"sourcesContent":["import React from 'react';\r\nimport { Card, TextBox, DropDown, Helpers } from \"core\";\r\nimport NotificationSystem from 'react-notification-system';\r\nimport { GetUrl, HandleError } from '../../utils/generals'\r\n\r\nexport default class FormSection extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = { YesNoStates: null, updateKey: 1 };\r\n        this.notificationSystem = React.createRef();\r\n\r\n        this.onSubmitError = this.onSubmitError.bind(this);\r\n        this.onSubmitSuccess = this.onSubmitSuccess.bind(this);\r\n    }\r\n\r\n    componentDidMount()\r\n    {\r\n      Helpers.CallServer('/api/FRQST/DropDown/GetDropDownYesNoStates/',\r\n      { },\r\n      successfulResponse =>\r\n      {\r\n        this.setState({ YesNoStates: successfulResponse.data });\r\n      },\r\n      errorResponse => {\r\n          return HandleError(Helpers, this.notificationSystem, errorResponse);\r\n      },\r\n      () =>\r\n      {\r\n          console.log('Done');\r\n      }, 'GET')\r\n    }\r\n\r\n    onSubmitError(er) {\r\n      return HandleError(Helpers, this.notificationSystem, er);\r\n    }\r\n\r\n    onSubmitSuccess()\r\n    {\r\n      if(this.props.formData == null)\r\n      {\r\n        var state = {\r\n          \"name\": \"\",\r\n          \"isMulti\": \"\",\r\n          \"isRequired\": \"\",\r\n          \"order\": \"\",\r\n          updateKey: this.state.updateKey + 1\r\n        };\r\n\r\n        this.setState(state);\r\n      }\r\n      Helpers.DisplaySuccessMessage(this.notificationSystem, 'اطلاعات با موفقیت ذخیره شد');\r\n      return true;\r\n    }\r\n    \r\n    render() {\r\n        return (\r\n          <>\r\n            <Card\r\n              context={ this }\r\n              title=\"جزئیات فرم پویا\"\r\n              icon=\"file-database\"\r\n              hasBackButton={ true }\r\n              hasDefaultSaveButton\r\n              submitUrl={ this.props.formData == null ? '/api/FRQST/Form/SaveForm' : '/api/FRQST/Form/EditForm' }\r\n              extraDataToSend={{ id: (this.props.formData == null ? null : this.props.formData.id) }}\r\n              statusColor=\"success\"\r\n              onSubmitError={ this.onSubmitError }\r\n              onSubmitSuccess={ this.onSubmitSuccess }\r\n              updateKey={ this.state.updateKey }\r\n              topButtons={[\r\n                {\r\n                  title: \"لیست فرم های پویا\",\r\n                  icon: \"list-details\",\r\n                  color: \"outline-success\",\r\n                  url: GetUrl(\"formListPage\"),\r\n                },\r\n              ]}>\r\n\r\n            <TextBox\r\n              context={ this }\r\n              name=\"name\"\r\n              title=\"نام فرم\"\r\n              required\r\n              maxLength={ 64 }\r\n              initialValue={ this.props.formData == null ? null : this.props.formData.name } />\r\n\r\n            <DropDown\r\n              context={ this }\r\n              name=\"isMulti\"\r\n              title=\"چند فرمی\"   \r\n              options={ this.state.YesNoStates == null ? [] : this.state.YesNoStates }\r\n              required\r\n              initialValue={ this.props.formData == null ? null : this.props.formData.isMulti } />\r\n          \r\n              <DropDown\r\n                context={ this }\r\n                name=\"isRequired\"\r\n                title=\"اجباری\" \r\n                options={ this.state.YesNoStates == null ? [] : this.state.YesNoStates }\r\n                required\r\n                initialValue={ this.props.formData == null ? null : this.props.formData.isRequired } />\r\n\r\n                <TextBox context={ this }\r\n                  name=\"order\"\r\n                  title=\"ترتیب نمایش\"\r\n                  required\r\n                  validateHandler={ Helpers.NumberTypeValidator }\r\n                  initialValue={ this.props.formData == null ? null : this.props.formData.order } />\r\n\r\n                <TextBox context={ this }\r\n                  name=\"monthCount\"\r\n                  title=\"اعتبار فرم (تعداد ماه)\"\r\n                  minLength={ 1 }\r\n                  maxLength={ 3 }\r\n                  validateHandler={ [ Helpers.NumberTypeValidator, Helpers.MinMaxLengthValidator ] }\r\n                  initialValue={ this.props.formData == null ? null : this.props.formData.monthCount } />\r\n\r\n            </Card>\r\n            <NotificationSystem ref={ this.notificationSystem } />\r\n          </>\r\n        );\r\n    }\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}