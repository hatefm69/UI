{"ast":null,"code":"import _classCallCheck from\"D:/Projects/React/AMLS/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/Projects/React/AMLS/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"D:/Projects/React/AMLS/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"D:/Projects/React/AMLS/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"D:/Projects/React/AMLS/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import{Helpers,PageMain,SimpleGrid,TextBox,DatePicker,DropDown,Delimiter}from\"core\";import React,{Component}from\"react\";import NotificationSystem from\"react-notification-system\";import{IsLegalPersonNationalIdValid,IsRealPersonNationalIdValid}from\"../../utils/nationalIdentification\";import Constants from\"../../utils/constants\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var btnWidth={\"width\":\"90px\"};var BranchCtrListPage=/*#__PURE__*/function(_Component){_inherits(BranchCtrListPage,_Component);var _super=_createSuper(BranchCtrListPage);function BranchCtrListPage(props){var _this;_classCallCheck(this,BranchCtrListPage);_this=_super.call(this,props);_this.onPersonNumberTypeIdChange=function(e){var title='کد ملی / شناسه ملی / کد فراگیر اتباع';var length=0;if(e.value==Constants.PersonNumberType.Real.value){title='کد ملی';length=10;}else if(e.value==Constants.PersonNumberType.Legal.value){title='شناسه ملی';length=11;}else if(e.value==Constants.PersonNumberType.Foreign.value){title='کد فراگیر اتباع';length=12;}_this.setState({numberTitle:title,numberMaxLength:length,numberIsReadOnly:false});};_this.PersonTypes=[Constants.PersonNumberType.Real,Constants.PersonNumberType.Legal,Constants.PersonNumberType.Foreign];_this.state={isLoading:false,numberTitle:\"کد ملی / شناسه ملی / کد فراگیر اتباع\",numberMaxLength:10,numberIsReadOnly:true,gridUpdate:1,filterUpdate:1};_this.notificationSystem=/*#__PURE__*/React.createRef();_this.searchCtr=_this.searchCtr.bind(_assertThisInitialized(_this));_this.downLoadCtr=_this.downLoadCtr.bind(_assertThisInitialized(_this));_this.resetFilters=_this.resetFilters.bind(_assertThisInitialized(_this));return _this;}_createClass(BranchCtrListPage,[{key:\"searchCtr\",value:function searchCtr(){var personNumberTypeId=this.state.personNumberTypeId;var number=this.state.number;if(number==null||number==\"\"||personNumberTypeId==null||personNumberTypeId==\"\"){this.setState({gridUpdate:this.state.gridUpdate+1});return;}if(personNumberTypeId==Constants.PersonNumberType.Real.value&&!IsRealPersonNationalIdValid(number)){Helpers.DisplayErrorMessage(this.notificationSystem,null,\"کد ملی معتبر نیست\");return;}if(personNumberTypeId==Constants.PersonNumberType.Legal.value&&!IsLegalPersonNationalIdValid(number)){Helpers.DisplayErrorMessage(this.notificationSystem,null,\"شناسه ملی معتبر نیست\");return;}this.setState({gridUpdate:this.state.gridUpdate+1});}},{key:\"returnValue\",value:function returnValue(value){return value==null||value==\"\"?\"**\":value;}},{key:\"downLoadCtr\",value:function downLoadCtr(){var params=\"/\".concat(this.returnValue(this.state.fromTransactionDate),\"/\").concat(this.returnValue(this.state.toTransactionDate),\"/\").concat(this.returnValue(this.state.customerNumber),\"/\").concat(this.returnValue(this.state.accountNumber),\"/\").concat(this.returnValue(this.state.personNumberTypeId),\"/\").concat(this.returnValue(this.state.number),\"/\").concat(this.returnValue(this.state.fromAmount),\"/\").concat(this.returnValue(this.state.toAmount));var wm=window.open(\"/api/amls/bi/Receive_CTR_/DownloadReceive_CTR\".concat(params),'_self');wm.focus();wm.onblur=function(){wm.close();};}},{key:\"resetFilters\",value:function resetFilters(){this.setState({fromTransactionDate:null,toTransactionDate:null,customerNumber:null,accountNumber:null,personNumberTypeId:null,number:null,fromAmount:null,toAmount:null,filterUpdate:this.state.filterUpdate+1});}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(PageMain,{context:this,title:\"\\u06AF\\u0632\\u0627\\u0631\\u0634 CTR\",icon:\"list-search\",isLoading:this.state.isLoading,footerLinks:[{href:\"/\",text:\"صفحه اصلی\"}],children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-4\",children:/*#__PURE__*/_jsx(DatePicker,{context:this,mdCol:12,lgCol:12,name:\"fromTransactionDate\",title:\"\\u062A\\u0627\\u0631\\u06CC\\u062E \\u062A\\u0631\\u0627\\u06A9\\u0646\\u0634 \\u0627\\u0632\",useEpoch:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-4\",children:/*#__PURE__*/_jsx(DatePicker,{context:this,mdCol:12,lgCol:12,name:\"toTransactionDate\",title:\"\\u062A\\u0627\\u0631\\u06CC\\u062E \\u062A\\u0631\\u0627\\u06A9\\u0646\\u0634 \\u062A\\u0627\",useEpoch:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-4\",children:/*#__PURE__*/_jsx(TextBox,{context:this,mdCol:12,lgCol:12,name:\"customerNumber\",title:\"\\u0634\\u0645\\u0627\\u0631\\u0647 \\u0645\\u0634\\u062A\\u0631\\u06CC\",readOnly:true,minLength:1,maxLength:25})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-4\",children:/*#__PURE__*/_jsx(TextBox,{context:this,mdCol:12,lgCol:12,name:\"accountNumber\",title:\"\\u0634\\u0645\\u0627\\u0631\\u0647 \\u062D\\u0633\\u0627\\u0628\",minLength:1,maxLength:25})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-4\",children:/*#__PURE__*/_jsx(DropDown,{context:this,mdCol:12,lgCol:12,name:\"personNumberTypeId\",title:\"\\u0646\\u0648\\u0639 \\u0634\\u062E\\u0635\",options:this.PersonTypes,changeHandler:this.onPersonNumberTypeIdChange})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-4\",children:/*#__PURE__*/_jsx(TextBox,{context:this,mdCol:12,lgCol:12,name:\"number\",title:this.state.numberTitle,minLength:1,maxLength:this.state.numberMaxLength,readOnly:this.state.numberIsReadOnly})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-4\",children:/*#__PURE__*/_jsx(TextBox,{context:this,mdCol:12,lgCol:12,name:\"fromAmount\",title:\"\\u0627\\u0632 \\u0645\\u0628\\u0644\\u063A\",minLength:1,maxLength:15,validateHandler:[Helpers.NumberTypeValidator,Helpers.MinMaxLengthValidator]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-4\",children:/*#__PURE__*/_jsx(TextBox,{context:this,mdCol:12,lgCol:12,name:\"toAmount\",title:\"\\u062A\\u0627 \\u0645\\u0628\\u0644\\u063A\",minLength:1,maxLength:15,validateHandler:[Helpers.NumberTypeValidator,Helpers.MinMaxLengthValidator]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-4\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-1 p-2\",children:/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"d-print-none btn btn-success me-auto\",style:btnWidth,onClick:this.searchCtr,children:[/*#__PURE__*/_jsx(\"i\",{className:\"me-1 ti ti-filter\"}),\"\\u062C\\u0633\\u062A\\u062C\\u0648\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-1 p-2\",children:/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"d-print-none btn btn-primary me-auto\",style:btnWidth,onClick:this.downLoadCtr,children:[/*#__PURE__*/_jsx(\"i\",{className:\"me-1 ti ti-download\"}),\"\\u062F\\u0627\\u0646\\u0644\\u0648\\u062F\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-9\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-1 p-2\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"d-print-none btn btn-default me-auto\",style:btnWidth,onClick:this.resetFilters,children:\"\\u062D\\u0630\\u0641 \\u0641\\u06CC\\u0644\\u062A\\u0631\"})})]}),/*#__PURE__*/_jsx(Delimiter,{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(SimpleGrid,{listApiUrl:\"/api/amls/bi/Receive_CTR_/SearchReceive_CTR\",context:this,title:\"\\u06AF\\u0632\\u0627\\u0631\\u0634 CTR\",dataKey:\"id\",name:\"grSrtReport\",lgCol:12,mdCol:12,notificationSystem:this.notificationSystem,minHeightTableWrapper:Constants.MinGridHeight,enableAutoFetch:true,extraItemsSentToFetchData:{FromTransactionDate:this.state.fromTransactionDate,ToTransactionDate:this.state.toTransactionDate,CustomerNumber:this.state.customerNumber,AccountNumber:this.state.accountNumber,PersonNumberTypeId:this.state.personNumberTypeId,Number:this.state.number,fromAmount:this.state.fromAmount,toAmount:this.state.toAmount},headers:[//{ title: \"شناسه\", name: \"id\" },\n{title:\"نام بانک\",name:\"bankName\"},{title:\"نام شعبه افتتاح  کننده\",name:\"openingBranchName\"},{title:\"کد شعبه افتتاح کننده\",name:\"openingBranchCode\"},{title:\"نام استان شعبه\",name:\"branchProvinceName\"},{title:\"نام شهر شعبه\",name:\"branchCityName\"},{title:\"تاریخ ترکنش\",name:\"transactionDate\"},{title:\"نام صاحب حساب\",name:\"ownerAccountFirstName\"},{title:\"نام خانوادگی صاحب حساب\",name:\"ownerAccountLastName\"},{title:\"کد ملی صاحب حساب\",name:\"ownerAccountNationalCode\"},{title:\"شماره شناسنامه صاحب حساب\",name:\"ownerBirthCertificationNumber\"},{title:\"نام پدر صاحب حساب\",name:\"ownerAccountFatherName\"},{title:\"نوع تراکنش\",name:\"transactionType\"},{title:\"نوع وجه\",name:\"currencyType\"},{title:\"نوع حساب\",name:\"accountType\"},{title:\"شماره حساب\",name:\"accountNumber\"},{title:\"نام بانک طرف حساب\",name:\"transactionBankName\"},{title:\"مبلغ\",name:\"amount\"},{title:\"ارز\",name:\"currency\"},{title:\"تاریخ چک\",name:\"checkDate\"},{title:\"سری چک\",name:\"checkSeries\"},{title:\"شماره سریال چک\",name:\"checkSerialNumber\"},{title:\"نوع چک\",name:\"checkType\"},{title:\"نام بانک چک\",name:\"checkBankName\"},{title:\"نام شعبه چک\",name:\"checkBranchName\"},{title:\"کد شعبه چک\",name:\"checkBranchCode\"},{title:\"شماره حساب جاری\",name:\"currentAccountNumber\"},{title:\"نام چک\",name:\"checkName\"},{title:\"مبلغ چک\",name:\"checkAmount\"},{title:\"نوع ارز چک\",name:\"checkCurrencyType\"},{title:\"پرداخت کننده چک\",name:\"checkPayer\"},{title:\"امضا کننده چک\",name:\"checkSigner\"},{title:\"گیرنده چک\",name:\"checkBuyer\"},{title:\"نام\",name:\"firstName\"},{title:\"نام خانوادگی\",name:\"lastName\"},{title:\"نام پدر\",name:\"fatherName\"},{title:\"شناسه ملی\",name:\"nationalCode\"},{title:\"شمار شناسنامه\",name:\"birthCertificateNumber\"},{title:\"تاریخ تولد\",name:\"birthDate\"},{title:\"استان\",name:\"provinceName\"},{title:\"شهر\",name:\"cityName\"},{title:\"آدرس\",name:\"address\"},{title:\"کد پستی\",name:\"postalCode\"},{title:\"تلفن\",name:\"telephoneNumber\"},{title:\"موبایل\",name:\"cellphoneNumber\"},{title:\"شغل\",name:\"jobName\"},{title:\"آدرس محل کار\",name:\"jobAddress\"},{title:\"کد پستی محل کار\",name:\"jobPostalCode\"},{title:\"تلفن محل کار\",name:\"jobTelephoneNumber\"},{title:\"توضیحات\",name:\"describtion\"},{title:\"CTR شماره سریال فرم\",name:\"ctR_Number\"},{title:\"کد ترکنش\",name:\"transactionCode\"},{title:\"شناسه بانک\",name:\"bankId\"},{title:\"کد پرسنلی\",name:\"personCode\"},{title:\"نوع فرم\",name:\"formType\"},{title:\"کد پولشویی\",name:\"moneyLaunderingCode\"}]},this.state.gridUpdate)]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-footer\",children:/*#__PURE__*/_jsx(\"div\",{className:\"d-flex\",children:/*#__PURE__*/_jsxs(\"a\",{className:\"btn btn-outline-secendery ms-auto\",onClick:function onClick(e){return _this2.Backward(e);},href:\"/\",title:\"\\u0628\\u0627\\u0632\\u06AF\\u0634\\u062A \\u0628\\u0647 \\u0635\\u0641\\u062D\\u0647 \\u0642\\u0628\\u0644\",children:[\"\\u0628\\u0627\\u0632\\u06AF\\u0634\\u062A\",/*#__PURE__*/_jsx(\"i\",{className:\"ti ti-arrow-left ms-1\"})]})})})]})},this.state.filterUpdate),/*#__PURE__*/_jsx(NotificationSystem,{ref:this.notificationSystem})]});}}]);return BranchCtrListPage;}(Component);export{BranchCtrListPage as default};","map":null,"metadata":{},"sourceType":"module"}