{"ast":null,"code":"var http = module.exports;\n\nvar EventEmitter = require('events').EventEmitter;\n\nvar Request = require('./lib/request');\n\nvar url = require('url');\n\nhttp.request = function (params, cb) {\n  if (typeof params === 'string') {\n    params = url.parse(params);\n  }\n\n  if (!params) params = {};\n\n  if (!params.host && !params.port) {\n    params.port = parseInt(window.location.port, 10);\n  }\n\n  if (!params.host && params.hostname) {\n    params.host = params.hostname;\n  }\n\n  if (!params.protocol) {\n    if (params.scheme) {\n      params.protocol = params.scheme + ':';\n    } else {\n      params.protocol = window.location.protocol;\n    }\n  }\n\n  if (!params.host) {\n    params.host = window.location.hostname || window.location.host;\n  }\n\n  if (/:/.test(params.host)) {\n    if (!params.port) {\n      params.port = params.host.split(':')[1];\n    }\n\n    params.host = params.host.split(':')[0];\n  }\n\n  if (!params.port) params.port = params.protocol == 'https:' ? 443 : 80;\n  var req = new Request(new xhrHttp(), params);\n  if (cb) req.on('response', cb);\n  return req;\n};\n\nhttp.get = function (params, cb) {\n  params.method = 'GET';\n  var req = http.request(params, cb);\n  req.end();\n  return req;\n};\n\nhttp.Agent = function () {};\n\nhttp.Agent.defaultMaxSockets = 4;\n\nvar xhrHttp = function () {\n  if (typeof window === 'undefined') {\n    throw new Error('no window object present');\n  } else if (window.XMLHttpRequest) {\n    return window.XMLHttpRequest;\n  } else if (window.ActiveXObject) {\n    var axs = ['Msxml2.XMLHTTP.6.0', 'Msxml2.XMLHTTP.3.0', 'Microsoft.XMLHTTP'];\n\n    for (var i = 0; i < axs.length; i++) {\n      try {\n        var ax = new window.ActiveXObject(axs[i]);\n        return function () {\n          if (ax) {\n            var ax_ = ax;\n            ax = null;\n            return ax_;\n          } else {\n            return new window.ActiveXObject(axs[i]);\n          }\n        };\n      } catch (e) {}\n    }\n\n    throw new Error('ajax not supported in this browser');\n  } else {\n    throw new Error('ajax not supported in this browser');\n  }\n}();\n\nhttp.STATUS_CODES = {\n  100: 'Continue',\n  101: 'Switching Protocols',\n  102: 'Processing',\n  // RFC 2518, obsoleted by RFC 4918\n  200: 'OK',\n  201: 'Created',\n  202: 'Accepted',\n  203: 'Non-Authoritative Information',\n  204: 'No Content',\n  205: 'Reset Content',\n  206: 'Partial Content',\n  207: 'Multi-Status',\n  // RFC 4918\n  300: 'Multiple Choices',\n  301: 'Moved Permanently',\n  302: 'Moved Temporarily',\n  303: 'See Other',\n  304: 'Not Modified',\n  305: 'Use Proxy',\n  307: 'Temporary Redirect',\n  400: 'Bad Request',\n  401: 'Unauthorized',\n  402: 'Payment Required',\n  403: 'Forbidden',\n  404: 'Not Found',\n  405: 'Method Not Allowed',\n  406: 'Not Acceptable',\n  407: 'Proxy Authentication Required',\n  408: 'Request Time-out',\n  409: 'Conflict',\n  410: 'Gone',\n  411: 'Length Required',\n  412: 'Precondition Failed',\n  413: 'Request Entity Too Large',\n  414: 'Request-URI Too Large',\n  415: 'Unsupported Media Type',\n  416: 'Requested Range Not Satisfiable',\n  417: 'Expectation Failed',\n  418: 'I\\'m a teapot',\n  // RFC 2324\n  422: 'Unprocessable Entity',\n  // RFC 4918\n  423: 'Locked',\n  // RFC 4918\n  424: 'Failed Dependency',\n  // RFC 4918\n  425: 'Unordered Collection',\n  // RFC 4918\n  426: 'Upgrade Required',\n  // RFC 2817\n  428: 'Precondition Required',\n  // RFC 6585\n  429: 'Too Many Requests',\n  // RFC 6585\n  431: 'Request Header Fields Too Large',\n  // RFC 6585\n  500: 'Internal Server Error',\n  501: 'Not Implemented',\n  502: 'Bad Gateway',\n  503: 'Service Unavailable',\n  504: 'Gateway Time-out',\n  505: 'HTTP Version Not Supported',\n  506: 'Variant Also Negotiates',\n  // RFC 2295\n  507: 'Insufficient Storage',\n  // RFC 4918\n  509: 'Bandwidth Limit Exceeded',\n  510: 'Not Extended',\n  // RFC 2774\n  511: 'Network Authentication Required' // RFC 6585\n\n};","map":null,"metadata":{},"sourceType":"script"}