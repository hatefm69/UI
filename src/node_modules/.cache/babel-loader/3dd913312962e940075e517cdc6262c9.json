{"ast":null,"code":"import _classCallCheck from\"D:/Projects/React/AMLS/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/Projects/React/AMLS/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"D:/Projects/React/AMLS/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"D:/Projects/React/AMLS/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"D:/Projects/React/AMLS/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import{Component}from\"react\";import React from\"react\";import{AutoComplete,Card,DropDown,Helpers,CheckBox,TextBox}from\"core\";import NotificationSystem from\"react-notification-system\";import{HandleError}from\"../utils/generals\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var RegionInfoSection=/*#__PURE__*/function(_Component){_inherits(RegionInfoSection,_Component);var _super=_createSuper(RegionInfoSection);function RegionInfoSection(props){var _this;_classCallCheck(this,RegionInfoSection);var state={updateKey:1,isActive:false,provinceUpdated:1};_this=_super.call(this,props);if(_this.props.record!=null){state['id']=_this.props.record.id;state['cityCode']=_this.props.record.cityCode;state['regionTypeId']=_this.props.record.regionTypeId.toString();state['isActive']=_this.props.record.isActive;}_this.state=state;_this.notificationSystem=/*#__PURE__*/React.createRef();_this.onSubmitSuccess=_this.onSubmitSuccess.bind(_assertThisInitialized(_this));_this.onCityChanged=_this.onCityChanged.bind(_assertThisInitialized(_this));return _this;}// Events.\n_createClass(RegionInfoSection,[{key:\"onSubmitSuccess\",value:function onSubmitSuccess(response){if(this.props.record==null)this.setState({regionCode:null,regionTypeId:null,isActive:null,provinceName:null,updateKey:this.state.updateKey+1});Helpers.DisplaySuccessMessage(this.notificationSystem,response.message);}},{key:\"onCityChanged\",value:function onCityChanged(e){var _this2=this;if(e==null||e.value==null||e.value==\"\"){this.setState({provinceName:\"نا مشخص\",provinceUpdated:this.state.provinceUpdated+1});return;}Helpers.CallServer('/api/amls/RegionInfo/GetCityProvince/'+e.value,{},function(successfulResponse){var provinceName=successfulResponse.data==\"نا مشخص\"||successfulResponse.data.province==null?[]:successfulResponse.data.province.name;_this2.setState({provinceName:provinceName,provinceUpdated:_this2.state.provinceUpdated+1});},function(errorResponse){return HandleError(Helpers,_this2.notificationSystem,errorResponse);},function(){_this2.setState({isLoading:false});},'GET');}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Card,{context:this,title:this.props.record==null?\"جزئیات افزودن مناطق\":\"جزئیات ویرایش مناطق\",name:\"crdRegionInfo\",statusColor:\"primary\",hasDefaultSaveButton:true,submitUrl:this.props.record==null?\"/api/amls/RegionInfo/AddRegionInfo\":\"/api/amls/RegionInfo/UpdateRegionInfo\",hasBackButton:true,icon:\"building\",onSubmitError:function onSubmitError(error){return HandleError(Helpers,_this3.notificationSystem,error);},onSubmitSuccess:this.onSubmitSuccess,updateKey:this.state.updateKey,children:[/*#__PURE__*/_jsx(DropDown,{context:this,name:\"regionTypeId\",title:\"\\u0646\\u0648\\u0639 \\u0645\\u0646\\u0637\\u0642\\u0647\",options:this.props.regionTypes,required:true}),/*#__PURE__*/_jsx(AutoComplete,{context:this,name:\"cityCode\",title:\"\\u0634\\u0647\\u0631\",notificationSystem:this.notificationSystem,required:true,remoteUrl:\"/api/amls/RegionInfo/SearchCities\",changeHandler:this.onCityChanged,externalData:this.props.record==null?[]:[{label:this.props.record.cityName,value:this.props.record.cityCode}]}),/*#__PURE__*/_jsx(TextBox,{context:this,name:\"provinceName\",title:\"\\u0646\\u0627\\u0645 \\u0627\\u0633\\u062A\\u0627\\u0646\",readOnly:true},this.state.provinceUpdated),/*#__PURE__*/_jsx(CheckBox,{context:this,name:\"isActive\",title:\"\\u0641\\u0639\\u0627\\u0644\"})]}),/*#__PURE__*/_jsx(NotificationSystem,{ref:this.notificationSystem})]});}}]);return RegionInfoSection;}(Component);export{RegionInfoSection as default};","map":null,"metadata":{},"sourceType":"module"}