{"ast":null,"code":"import _classCallCheck from\"D:/Projects/React/AMLS/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/Projects/React/AMLS/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"D:/Projects/React/AMLS/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"D:/Projects/React/AMLS/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"D:/Projects/React/AMLS/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import{Component}from\"react\";import React from\"react\";import{PageMain,SimpleGrid,Helpers,Delimiter,DropDown,DatePicker,CellContainer}from\"core\";import NotificationSystem from\"react-notification-system\";import{GetUrl,HandleError}from\"../../utils/generals\";import{GetGridHeaders}from\"../../utils/indicators\";import Constants from'../../utils/constants';import{Backward}from\"../../utils/generals\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var IndicatorsResultPage=/*#__PURE__*/function(_Component){_inherits(IndicatorsResultPage,_Component);var _super=_createSuper(IndicatorsResultPage);function IndicatorsResultPage(props){var _this;_classCallCheck(this,IndicatorsResultPage);_this=_super.call(this,props);_this.state={isLoading:true,indicators:[],indicatorId:null,gridHeaders:[],gridUpdate:1};_this.notificationSystem=/*#__PURE__*/React.createRef();_this.onRoleSelected=_this.onRoleSelected.bind(_assertThisInitialized(_this));_this.searchRole=_this.searchRole.bind(_assertThisInitialized(_this));_this.RequestDownloadFile=_this.RequestDownloadFile.bind(_assertThisInitialized(_this));return _this;}// Events.\n_createClass(IndicatorsResultPage,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;Helpers.CallServer('/api/amls/DistributionOfIndicator/GetAllIndexes',{},function(successfulResponse){_this2.setState({indicators:successfulResponse.data});},function(errorResponse){return HandleError(Helpers,_this2.notificationSystem,errorResponse);},function(){_this2.setState({isLoading:false});},'GET');}},{key:\"onRoleSelected\",value:function onRoleSelected(item){if(item==null||item.value==null||item.value==\"\"){this.setState({gridHeaders:[]});return;}this.setState({gridHeaders:GetGridHeaders(item.value),gridUpdate:this.state.gridUpdate+1});}},{key:\"searchRole\",value:function searchRole(){this.setState({gridUpdate:this.state.gridUpdate+1});}},{key:\"RequestDownloadFile\",value:function RequestDownloadFile(){var _this3=this;if(this.state.indicatorId==null||this.state.indicatorId==undefined||this.state.indicatorId==\"\"){Helpers.DisplayErrorMessage(this.notificationSystem,null,\"قواعد مورد نظر را انتخاب نمایید\");return;}Helpers.CallServer('/api/amls/Request/AddRoleRequest',{IndexValue:this.state.indicatorId,FromTransactionDate:this.state.fromTransactionDate,ToTransactionDate:this.state.toTransactionDate},function(successfulResponse){Helpers.DisplaySuccessMessage(_this3.notificationSystem,\"در خواست دانلود قواعد با موفقیت ثبت گردید\");},function(errorResponse){return HandleError(Helpers,_this3.notificationSystem,errorResponse);},function(){_this3.setState({isLoading:false});});}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(PageMain,{context:this,title:\"\\u0645\\u0634\\u0627\\u0647\\u062F\\u0647 \\u0646\\u062A\\u0627\\u06CC\\u062C \\u0627\\u062C\\u0631\\u0627\\u06CC \\u0642\\u0648\\u0627\\u0639\\u062F\",icon:\"list-search\",isLoading:this.state.isLoading,footerLinks:[{href:\"/\",text:\"صفحه اصلی\"}],topButtons:[{title:\"ثبت درخواست دانلود قواعد\",url:this.RequestDownloadFile,color:\"outline-primary\",icon:\"file-spreadsheet\"},{title:\"فهرست درخواست دانلود قواعد\",url:GetUrl(\"indicatorsRequestListPage\"),color:\"outline-primary\",icon:\"list-search\"}],children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-4\",children:/*#__PURE__*/_jsx(DropDown,{context:this,mdCol:12,lgCol:12,name:\"indicatorId\",title:\"\\u0642\\u0648\\u0627\\u0639\\u062F\",options:this.state.indicators,required:true,changeHandler:this.onRoleSelected})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-4\",children:/*#__PURE__*/_jsx(DatePicker,{context:this,mdCol:12,lgCol:12,name:\"fromTransactionDate\",title:\"\\u062A\\u0627\\u0631\\u06CC\\u062E \\u06A9\\u0634\\u0641 \\u0645\\u0639\\u0627\\u0645\\u0644\\u0627\\u062A \\u0645\\u0634\\u06A9\\u0648\\u06A9 \\u0627\\u0632\",useEpoch:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-4\",children:/*#__PURE__*/_jsx(DatePicker,{context:this,mdCol:4,lgCol:12,name:\"toTransactionDate\",title:\"\\u062A\\u0627\\u0631\\u06CC\\u062E \\u06A9\\u0634\\u0641 \\u0645\\u0639\\u0627\\u0645\\u0644\\u0627\\u062A \\u0645\\u0634\\u06A9\\u0648\\u06A9 \\u062A\\u0627\",useEpoch:true})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-11\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-1 p-2\",children:/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"d-print-none btn btn-success me-auto\",onClick:this.searchRole,children:[/*#__PURE__*/_jsx(\"i\",{className:\"me-1 ti ti-filter\"}),\"\\u062C\\u0633\\u062A\\u062C\\u0648\"]})})]}),this.state.indicatorId&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Delimiter,{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(SimpleGrid,{context:this,dataKey:\"id\",minHeightTableWrapper:Constants.MinGridHeight,hasSearchBox:false,hideExportButton:true,filterBgColor:\"primary\",name:\"crdRegionList\",title:\"\\u0645\\u0634\\u0627\\u0647\\u062F\\u0647 \\u0646\\u062A\\u0627\\u06CC\\u062C \\u0627\\u062C\\u0631\\u0627\\u06CC \\u0642\\u0648\\u0627\\u0639\\u062F \\u0647\\u0627\",notificationSystem:this.notificationSystem,enableAutoFetch:true,listApiUrl:\"/api/amls/bi/Role_01_/SearchRoles\",headers:this.state.gridHeaders,disabledPaging:false,extraItemsSentToFetchData:{IndexValue:this.state.indicatorId,FromTransactionDate:this.state.fromTransactionDate,ToTransactionDate:this.state.toTransactionDate}},this.state.gridUpdate)]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-footer\",children:/*#__PURE__*/_jsx(\"div\",{className:\"d-flex\",children:/*#__PURE__*/_jsxs(\"a\",{className:\"btn btn-outline-secendery ms-auto\",onClick:function onClick(e){return Backward(e);},href:\"/\",title:\"\\u0628\\u0627\\u0632\\u06AF\\u0634\\u062A \\u0628\\u0647 \\u0635\\u0641\\u062D\\u0647 \\u0642\\u0628\\u0644\",children:[\"\\u0628\\u0627\\u0632\\u06AF\\u0634\\u062A\",/*#__PURE__*/_jsx(\"i\",{className:\"ti ti-arrow-left ms-1\"})]})})})]})}),/*#__PURE__*/_jsx(NotificationSystem,{ref:this.notificationSystem})]});}}]);return IndicatorsResultPage;}(Component);export{IndicatorsResultPage as default};","map":null,"metadata":{},"sourceType":"module"}