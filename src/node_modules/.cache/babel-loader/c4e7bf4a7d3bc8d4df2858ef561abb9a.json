{"ast":null,"code":"import _objectSpread from\"D:/Projects/React/CMI/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _classCallCheck from\"D:/Projects/React/CMI/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/Projects/React/CMI/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"D:/Projects/React/CMI/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"D:/Projects/React/CMI/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import{Card,DropDown,Helpers,TextBox}from\"core\";import React from\"react\";import NotificationSystem from\"react-notification-system\";import{MaxLengthDescription,ProfileTyps}from\"../../utils/constants\";import{GetUrl,HandleError}from\"../../utils/generals\";import{isActiveOptions}from\"../../utils/selectOptionUtils\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var InspectorProfileReferralGroupSection=/*#__PURE__*/function(_React$Component){_inherits(InspectorProfileReferralGroupSection,_React$Component);var _super=_createSuper(InspectorProfileReferralGroupSection);function InspectorProfileReferralGroupSection(props){var _this;_classCallCheck(this,InspectorProfileReferralGroupSection);_this=_super.call(this,props);_this.componentDidMount=function(){_this.getReferralGroups();_this.getInspectorProfiles();// Update\nif(_this.props.record)_this.setState(function(){return _objectSpread(_objectSpread({},_this.props.record),{},{referralGroupId:_this.props.record.referralGroupId,inspectorProfileId:_this.props.record.inspectorProfileId,deactivationDate:_this.props.record.deactivationDateShamsi?_this.props.record.deactivationDateShamsi:_this.props.todayDateShamsi,isActive:_this.props.record.isActive.toString(),updateKey:_this.state.updateKey+1});});};_this.getReferralGroups=function(){Helpers.CallServer(\"/api/cmi/ReferralGroup/GetAllForDropDown\",{},function(response){_this.setState({referralGroups:response,updateKey:_this.state.updateKey+1});},function(error){return HandleError(_this.notificationSystem,error);},function(){return _this.setState({isLoading:false});});};_this.getInspectorProfiles=function(){Helpers.CallServer(\"/api/cmi/InspectorProfile/GetAllForDropDown/\"+ProfileTyps.Referred,{},function(response){_this.setState({inspectorProfiles:response,updateKey:_this.state.updateKey+1});},function(error){return HandleError(_this.notificationSystem,error);},function(){return _this.setState({isLoading:false});});};_this.onSubmitSuccess=function(){// Add\nif(_this.props.record==null){_this.setState({referralGroupId:null,inspectorProfileId:null,isActive:\"true\",description:\"\",updateKey:_this.state.updateKey+1});Helpers.DisplaySuccessMessage(_this.notificationSystem,\"\\u0628\\u0627 \\u0645\\u0648\\u0641\\u0642\\u06CC\\u062A \\u062B\\u0628\\u062A \\u0634\\u062F \\u060C \\u0645\\u06CC \\u062A\\u0648\\u0627\\u0646\\u06CC\\u062F \\u0645\\u0648\\u0631\\u062F \\u062C\\u062F\\u06CC\\u062F\\u06CC \\u0631\\u0627 \\u062B\\u0628\\u062A \\u0646\\u0645\\u0627\\u06CC\\u06CC\\u062F\");}// Update\nelse{Helpers.DisplaySuccessMessage(_this.notificationSystem,\"\\u0628\\u0627 \\u0645\\u0648\\u0641\\u0642\\u06CC\\u062A \\u0648\\u06CC\\u0631\\u0627\\u06CC\\u0634 \\u0634\\u062F \\u060C \\u062F\\u0631 \\u062D\\u0627\\u0644 \\u0627\\u0646\\u062A\\u0642\\u0627\\u0644 \\u0628\\u0647 \\u0641\\u0647\\u0631\\u0633\\u062A ...\");setInterval(function(){window.location.href=GetUrl(\"inspectorProfileReferralGroupListPage\");},3000);}};_this.state={updateKey:1000,referralGroups:[],inspectorProfiles:[],referralGroupId:null,inspectorProfileId:null};_this.notificationSystem=/*#__PURE__*/React.createRef();return _this;}_createClass(InspectorProfileReferralGroupSection,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Card,{hasCollapsibleButton:true,context:this,title:\"\\u062B\\u0628\\u062A \\u062A\\u062E\\u0635\\u06CC\\u0635 \\u0627\\u0631\\u062C\\u0627\\u0639 \\u06AF\\u06CC\\u0631\\u0646\\u062F\\u0647 \\u0628\\u0647 \\u06AF\\u0631\\u0648\\u0647 \\u0627\\u0631\\u062C\\u0627\\u0639\\u0627\\u062A \\u062C\\u062F\\u06CC\\u062F\",icon:\"forms\",hasDefaultSaveButton:true,statusColor:\"primary\",submitUrl:this.props.record==null?\"/api/cmi/InspectorProfileReferralGroup/Post\":\"/api/cmi/InspectorProfileReferralGroup/Update\",onSubmitError:function onSubmitError(error){return HandleError(Helpers,_this2.notificationSystem,error);},onSubmitSuccess:this.onSubmitSuccess,children:[/*#__PURE__*/_jsx(DropDown,{context:this,name:\"referralGroupId\",title:\"\\u06AF\\u0631\\u0648\\u0647 \\u0627\\u0631\\u062C\\u0627\\u0639\\u0627\\u062A\",options:this.state.referralGroups,required:true,notificationSystem:this.notificationSystem}),/*#__PURE__*/_jsx(DropDown,{context:this,name:\"inspectorProfileId\",title:\"\\u0627\\u0631\\u062C\\u0627\\u0639 \\u06AF\\u06CC\\u0631\\u0646\\u062F\\u0647\",options:this.state.inspectorProfiles,required:true,notificationSystem:this.notificationSystem}),/*#__PURE__*/_jsx(DropDown,{context:this,name:\"isActive\",title:\"\\u0648\\u0636\\u0639\\u06CC\\u062A\",required:true,options:isActiveOptions(),initialValue:\"true\"}),this.state.isActive==\"false\"&&/*#__PURE__*/_jsx(TextBox,{context:this,name:\"deactivationDate\",title:\"\\u062A\\u0627\\u0631\\u06CC\\u062E \\u063A\\u06CC\\u0631\\u0641\\u0639\\u0627\\u0644 \\u0633\\u0627\\u0632\\u06CC\",initialValue:this.props.record?this.state.deactivationDate:this.props.todayDateShamsi,readOnly:true}),/*#__PURE__*/_jsx(TextBox,{context:this,name:\"description\",title:\"\\u0634\\u0631\\u062D\",lgCol:12,multiline:true,multilineRows:3,maxLength:MaxLengthDescription})]},this.state.updateKey),/*#__PURE__*/_jsx(NotificationSystem,{ref:this.notificationSystem})]});}}]);return InspectorProfileReferralGroupSection;}(React.Component);","map":null,"metadata":{},"sourceType":"module"}