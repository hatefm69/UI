{"ast":null,"code":"import _classCallCheck from\"D:/Projects/React/AMLS/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/Projects/React/AMLS/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"D:/Projects/React/AMLS/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"D:/Projects/React/AMLS/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import{CheckBox,DatePicker,DropDown,Helpers,PageMain,SimpleGrid}from\"core\";import React,{Component}from\"react\";import constants from\"../../utils/constants\";import NotificationSystem from\"react-notification-system\";import Button from\"../../componet/button\";import{HandleError,DownloadBlobFile}from\"../../utils/generals\";import{Backward}from\"../../utils/generals\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var BaseDataPage=/*#__PURE__*/function(_Component){_inherits(BaseDataPage,_Component);var _super=_createSuper(BaseDataPage);function BaseDataPage(props){var _this;_classCallCheck(this,BaseDataPage);_this=_super.call(this,props);_this.onSearch=function(){var reportTypeId=_this.state.reportTypeId;// var fromDate = this.state.fromDate;\n// var toDate = this.state.toDate;\nif(reportTypeId==null||reportTypeId==\"\"){Helpers.DisplayErrorMessage(_this.notificationSystem,null,\"نوع گزارش را وارد نمایید\");return false;}// if (fromDate == null || fromDate == \"\") {\n//   Helpers.DisplayErrorMessage(\n//     this.notificationSystem,\n//     null,\n//     \"از تاریخ را وارد نمایید\"\n//   );\n//   return false;\n// }\n// if (toDate == null || toDate == \"\") {\n//   Helpers.DisplayErrorMessage(\n//     this.notificationSystem,\n//     null,\n//     \"تا تاریخ را وارد نمایید\"\n//   );\n//   return false;\n// }\n_this.setState({isLoading:true});Helpers.CallServer(\"/api/amls/TableBaseCard/GetSimpleGridOptions/\".concat(_this.currentSelectedReport.value),{},function(successfulResponse){_this.setState({gridHeaders:successfulResponse.headers,gridFilterOption:successfulResponse.filterOptions,selectedReport:_this.currentSelectedReport});},function(errorResponse){_this.setState({gridHeaders:null,selectedReport:item});return HandleError(Helpers,_this.notificationSystem,errorResponse);},function(){_this.setState({isLoading:false});},\"GET\");};_this.onRemoveFilter=function(){_this.setState({reportTypeId:null,updateKey:_this.state.updateKey+1,selectedReport:null,fromDate:null,toDate:null});};_this.onReportTypeSelected=function(item){if(item==null||item.value==null||item.value==\"\"){_this.currentSelectedReport=null;return;}_this.currentSelectedReport=item;};_this.downloadSampleFile=function(){var reportTypeId=_this.state.reportTypeId;// var fromDate = this.state.fromDate;\n// var toDate = this.state.toDate;\nif(reportTypeId==null||reportTypeId==\"\"){Helpers.DisplayErrorMessage(_this.notificationSystem,null,\"نوع گزارش را وارد نمایید\");return false;}// if (fromDate == null || fromDate == \"\") {\n//   Helpers.DisplayErrorMessage(\n//     this.notificationSystem,\n//     null,\n//     \"از تاریخ را وارد نمایید\"\n//   );\n//   return false;\n// }\n// if (toDate == null || toDate == \"\") {\n//   Helpers.DisplayErrorMessage(\n//     this.notificationSystem,\n//     null,\n//     \"تا تاریخ را وارد نمایید\"\n//   );\n//   return false;\n// }\n_this.setState({isLoading:true});Helpers.CallServer(\"/api/amls/TableBaseCard/DownloadBasicInformationReport/\".concat(_this.state.reportTypeId),{},function(successfulResponse){return DownloadBlobFile(successfulResponse,\"BasicInformationReport.xlsx\");},function(errorResponse){return HandleError(Helpers,_this.notificationSystem,errorResponse);},function(){return _this.setState({isLoading:false});},\"GET\",\"blob\");};_this.state={isLoading:false,updateKey:1,gridHeaders:[],reportTypes:null,selectedReport:null,gridFilterOption:null};_this.currentSelectedReport=null;_this.notificationSystem=/*#__PURE__*/React.createRef();return _this;}// Events.\n_createClass(BaseDataPage,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;Helpers.CallServer(\"/api/amls/TableBaseCard/GetBasicInformation_ReportTypes\",{},function(successfulResponse){_this2.setState({reportTypes:successfulResponse});},function(errorResponse){return HandleError(Helpers,_this2.notificationSystem,errorResponse);},function(){_this2.setState({isLoading:false});},\"GET\");}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(PageMain,{title:\"\\u06AF\\u0632\\u0627\\u0631\\u0634 \\u0627\\u0637\\u0644\\u0627\\u0639\\u0627\\u062A \\u067E\\u0627\\u06CC\\u0647\",icon:\"list-search\",isLoading:this.state.isLoading,footerLinks:[{href:\"/\",text:\"صفحه اصلی\"}],children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[this.state.reportTypes&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(DropDown,{context:this,mdCol:4,lgCol:4,name:\"reportTypeId\",title:\"\\u0646\\u0648\\u0639 \\u06AF\\u0632\\u0627\\u0631\\u0634\",options:this.state.reportTypes,required:true,changeHandler:function changeHandler(e){return _this3.onReportTypeSelected(e);}}),/*#__PURE__*/_jsx(DatePicker,{context:this,mdCol:4,lgCol:4,name:\"fromDate\",title:\"\\u0627\\u0632 \\u062A\\u0627\\u0631\\u06CC\\u062E\",useEpoch:true//  required\n}),/*#__PURE__*/_jsx(DatePicker,{context:this,mdCol:4,lgCol:4,name:\"toDate\",title:\"\\u062A\\u0627 \\u062A\\u0627\\u0631\\u06CC\\u062E\",useEpoch:true// required\n})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(CheckBox,{context:this,lgCol:6,mdCol:6,name:\"isLatin\",title:\"\\u0633\\u0631 \\u0633\\u062A\\u0648\\u0646 \\u0644\\u0627\\u062A\\u06CC\\u0646\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[/*#__PURE__*/_jsx(Button,{buttonClass:\"btn btn-outline-primary m-1 styleButton\",text:\"\\u062C\\u0633\\u062A\\u062C\\u0648\",onclick:function onclick(){return _this3.onSearch();}}),/*#__PURE__*/_jsx(Button,{buttonClass:\"btn btn-outline-danger m-1 styleButton\",text:\"\\u062D\\u0630\\u0641 \\u0641\\u06CC\\u0644\\u062A\\u0631\",onclick:function onclick(){return _this3.onRemoveFilter();}}),/*#__PURE__*/_jsx(Button,{buttonClass:\"btn btn-outline-success m-1 styleButton\",text:\"\\u062E\\u0631\\u0648\\u062C\\u06CC \\u0627\\u06A9\\u0633\\u0644\",onclick:function onclick(){return _this3.downloadSampleFile();}})]})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{})]}),this.state.selectedReport&&/*#__PURE__*/_jsx(SimpleGrid,{context:this,minHeightTableWrapper:constants.MinGridHeight,filterBgColor:\"primary\",hideExportButton:true,name:\"baseInformationList\",title:\"\\u06AF\\u0632\\u0627\\u0631\\u0634 \\u0627\\u0637\\u0644\\u0627\\u0639\\u0627\\u062A \\u067E\\u0627\\u06CC\\u0647 - \".concat(this.state.selectedReport.title),listApiUrl:\"/api/amls/TableBaseCard/SearchReport\",extraItemsSentToFetchData:{reportTypeId:this.state.selectedReport.value},headers:this.state.gridHeaders,enableAutoFetch:true,filterOptions:this.state.gridFilterOption,notificationSystem:this.notificationSystem})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-footer\",children:/*#__PURE__*/_jsx(\"div\",{className:\"d-flex\",children:/*#__PURE__*/_jsxs(\"a\",{className:\"btn btn-outline-secendery ms-auto\",onClick:function onClick(e){return Backward(e);},href:\"/\",title:\"\\u0628\\u0627\\u0632\\u06AF\\u0634\\u062A \\u0628\\u0647 \\u0635\\u0641\\u062D\\u0647 \\u0642\\u0628\\u0644\",children:[\"\\u0628\\u0627\\u0632\\u06AF\\u0634\\u062A\",/*#__PURE__*/_jsx(\"i\",{className:\"ti ti-arrow-left ms-1\"})]})})})]})},this.state.updateKey),/*#__PURE__*/_jsx(NotificationSystem,{ref:this.notificationSystem})]});}}]);return BaseDataPage;}(Component);export{BaseDataPage as default};","map":null,"metadata":{},"sourceType":"module"}