{"ast":null,"code":"var _jsxFileName = \"D:\\\\Projects\\\\React\\\\AMLS\\\\src\\\\pages\\\\Indicators\\\\distributionOfIndicatorsPage.js\";\nimport { Card, AutoComplete, DatePicker, Table, PageMain, Helpers, DropDown } from \"core\";\nimport React from \"react\";\nimport NotificationSystem from \"react-notification-system\";\nimport Constants from \"../../utils/constants\";\nimport { HandleError, IsValid } from '../../utils/generals';\nimport TableItem from '../../models/tableItem';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default class DistributionOfIndicatorsPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      indexes: null,\n      personIndexes: []\n    };\n    this.notificationSystem = /*#__PURE__*/React.createRef();\n    this.RowIndex = 1;\n    this.onPersonSelected = this.onPersonSelected.bind(this);\n    this.LoadTable = this.LoadTable.bind(this);\n    this.onPersonIndexAdd = this.onPersonIndexAdd.bind(this);\n  }\n\n  GetTableRow(record) {\n    var tableColumns = [];\n    tableColumns.push(new TableItem(\"roleCode\", record.roleCode, this.RowIndex));\n    tableColumns.push(new TableItem(\"roleName\", record.roleName, this.RowIndex));\n    tableColumns.push(new TableItem(\"solarExpirationDateFrom\", record.solarExpirationDateFrom, {\n      Id: record.id,\n      Index: this.RowIndex++\n    }));\n    return tableColumns;\n  }\n\n  LoadTable(records) {\n    var personIndexes = [];\n    this.RowIndex = 1;\n\n    if (records == null) {\n      this.setState({\n        personIndexes: personIndexes\n      });\n      return;\n    }\n\n    records.forEach(record => personIndexes.push(this.GetTableRow(record)));\n    this.setState({\n      personIndexes: personIndexes\n    });\n  } // Events.\n\n\n  componentDidMount() {\n    Helpers.CallServer('/api/amls/DistributionOfIndicator/GetAllIndexes', {}, successfulResponse => {\n      this.setState({\n        indexes: successfulResponse.data\n      });\n    }, errorResponse => HandleError(Helpers, this.notificationSystem, errorResponse), () => {\n      this.setState({\n        isLoading: false\n      });\n    }, 'GET');\n  }\n\n  onPersonSelected(item) {\n    if (item == null || item.value == null || item.value == \"\") {\n      return;\n    }\n\n    var personCode = item.value;\n    Helpers.CallServer('/api/amls/DistributionOfIndicator/GetPersonDistributionOfIndicators/' + personCode, {}, successfulResponse => {\n      this.LoadTable(successfulResponse.data);\n    }, errorResponse => HandleError(Helpers, this.notificationSystem, errorResponse), () => {\n      this.setState({\n        isLoading: false\n      });\n    }, 'GET');\n  }\n\n  onPersonIndexAdd() {}\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(PageMain, {\n        title: \"\\u062A\\u0648\\u0632\\u06CC\\u0639 \\u0634\\u0627\\u062E\\u0635\",\n        icon: \"chart-line\",\n        footerLinks: [{\n          href: \"/\",\n          text: \"صفحه اصلی\"\n        }],\n        isLoading: this.state.isLoading,\n        topButtons: [],\n        children: this.state.indexes && /*#__PURE__*/_jsxDEV(Card, {\n          context: this,\n          title: \"\\u062C\\u0632\\u0626\\u06CC\\u0627\\u062A \\u062A\\u0648\\u0632\\u06CC\\u0639 \\u0634\\u0627\\u062E\\u0635\",\n          icon: \"chart-line\",\n          hasDefaultSaveButton: true,\n          hasBackButton: true,\n          statusColor: \"primary\",\n          children: [/*#__PURE__*/_jsxDEV(AutoComplete, {\n            context: this,\n            name: \"personCode\",\n            title: \"\\u067E\\u0631\\u0633\\u0646\\u0644\",\n            required: true,\n            remoteUrl: \"/api/amls/DistributionOfIndicator/SearchPersonels\",\n            changeHandler: this.onPersonSelected\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(DropDown, {\n            context: this,\n            name: \"roleCode\",\n            title: \"\\u0634\\u0627\\u062E\\u0635\",\n            options: this.state.indexes,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(DatePicker, {\n            context: this,\n            name: \"expirationDateFrom\",\n            title: \"\\u062A\\u0627\\u0631\\u06CC\\u062E \\u0627\\u0639\\u062A\\u0628\\u0627\\u0631 \\u0627\\u0632\",\n            useEpoch: true,\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-10\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col p-2\",\n              children: /*#__PURE__*/_jsxDEV(\"a\", {\n                className: \"btn btn-sm btn-outline-primary float-end\",\n                onClick: this.onPersonIndexAdd,\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"ti me-2 ti-circle-plus\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 103,\n                  columnNumber: 27\n                }, this), \"\\u0627\\u0641\\u0632\\u0648\\u062F\\u0646\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Table, {\n            minHeightTableWrapper: Constants.MinGridHeight,\n            data: this.state.personIndexes,\n            headers: [{\n              title: \"کد شاخص\",\n              name: \"roleCode\"\n            }, {\n              title: \"نام شاخص\",\n              name: \"roleName\"\n            }, {\n              title: \"تاریخ اعتبار از\",\n              name: \"solarExpirationDateFrom\"\n            }],\n            hasDeleteButton: true,\n            onDeleteButton: this.props.onDelete\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(NotificationSystem, {\n        ref: this.notificationSystem\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n\n}","map":{"version":3,"names":["Card","AutoComplete","DatePicker","Table","PageMain","Helpers","DropDown","React","NotificationSystem","Constants","HandleError","IsValid","TableItem","DistributionOfIndicatorsPage","Component","constructor","props","state","isLoading","indexes","personIndexes","notificationSystem","createRef","RowIndex","onPersonSelected","bind","LoadTable","onPersonIndexAdd","GetTableRow","record","tableColumns","push","roleCode","roleName","solarExpirationDateFrom","Id","id","Index","records","setState","forEach","componentDidMount","CallServer","successfulResponse","data","errorResponse","item","value","personCode","render","href","text","MinGridHeight","title","name","onDelete"],"sources":["D:/Projects/React/AMLS/src/pages/Indicators/distributionOfIndicatorsPage.js"],"sourcesContent":["import { Card, AutoComplete,DatePicker, Table, PageMain, Helpers, DropDown } from \"core\";\r\nimport React from \"react\";\r\nimport NotificationSystem from \"react-notification-system\";\r\nimport Constants from \"../../utils/constants\";\r\nimport { HandleError, IsValid } from '../../utils/generals'\r\nimport TableItem from '../../models/tableItem'\r\n\r\nexport default class DistributionOfIndicatorsPage extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isLoading: true,\r\n      indexes: null,\r\n      personIndexes: []\r\n    };\r\n\r\n    this.notificationSystem = React.createRef();\r\n    this.RowIndex = 1;\r\n\r\n    this.onPersonSelected = this.onPersonSelected.bind(this);\r\n    this.LoadTable = this.LoadTable.bind(this);\r\n    this.onPersonIndexAdd = this.onPersonIndexAdd.bind(this);\r\n  }\r\n\r\n  GetTableRow(record)\r\n  {\r\n    var tableColumns = [];\r\n\r\n    tableColumns.push(new TableItem(\"roleCode\", record.roleCode, this.RowIndex));\r\n    tableColumns.push(new TableItem(\"roleName\", record.roleName, this.RowIndex));\r\n    tableColumns.push(new TableItem(\"solarExpirationDateFrom\", record.solarExpirationDateFrom, { Id: record.id, Index: this.RowIndex++ }));\r\n\r\n    return tableColumns;\r\n  }\r\n\r\n  LoadTable(records)\r\n  {\r\n    var personIndexes = [];\r\n\r\n    this.RowIndex = 1;\r\n    if(records == null)\r\n    {\r\n      this.setState({ personIndexes: personIndexes });\r\n      return;\r\n    }\r\n\r\n    records.forEach(record => personIndexes.push(this.GetTableRow(record)));\r\n    this.setState({ personIndexes: personIndexes });\r\n  }\r\n\r\n  // Events.\r\n  componentDidMount()\r\n  {\r\n      Helpers.CallServer('/api/amls/DistributionOfIndicator/GetAllIndexes',\r\n          { },\r\n          successfulResponse =>\r\n          {\r\n              this.setState({ indexes: successfulResponse.data });\r\n          },\r\n          errorResponse => HandleError(Helpers, this.notificationSystem, errorResponse),\r\n          () => { this.setState({ isLoading: false }) }, 'GET');\r\n  }\r\n\r\n  onPersonSelected(item)\r\n  {\r\n    if(item == null || item.value == null || item.value == \"\")\r\n    {\r\n\r\n      return;\r\n    }\r\n    var personCode = item.value;\r\n\r\n    Helpers.CallServer('/api/amls/DistributionOfIndicator/GetPersonDistributionOfIndicators/' + personCode,\r\n    { },\r\n    successfulResponse =>\r\n    {\r\n        this.LoadTable(successfulResponse.data);\r\n    },\r\n    errorResponse => HandleError(Helpers, this.notificationSystem, errorResponse),\r\n    () => { this.setState({ isLoading: false }) }, 'GET');\r\n  }\r\n\r\n  onPersonIndexAdd()\r\n  {\r\n\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        <PageMain title=\"توزیع شاخص\" icon=\"chart-line\" footerLinks={[{ href: \"/\", text: \"صفحه اصلی\" }]} isLoading={ this.state.isLoading } topButtons={[]}>\r\n          {\r\n            this.state.indexes &&\r\n              <Card context={ this } title=\"جزئیات توزیع شاخص\" icon=\"chart-line\" hasDefaultSaveButton hasBackButton statusColor=\"primary\">\r\n              \r\n                <AutoComplete context={ this } name=\"personCode\" title=\"پرسنل\" required remoteUrl=\"/api/amls/DistributionOfIndicator/SearchPersonels\" changeHandler={ this.onPersonSelected } />\r\n                <DropDown context={ this } name=\"roleCode\" title=\"شاخص\" options={ this.state.indexes } required />\r\n                <DatePicker context={ this } name=\"expirationDateFrom\" title=\"تاریخ اعتبار از\" useEpoch required />\r\n                <div className=\"row\">\r\n                  <div className=\"col-10\"></div>\r\n                  <div className=\"col p-2\">\r\n                      <a className=\"btn btn-sm btn-outline-primary float-end\" onClick={ this.onPersonIndexAdd }>\r\n                          <i className=\"ti me-2 ti-circle-plus\" />افزودن\r\n                      </a>\r\n                  </div>\r\n                </div>\r\n                <Table\r\n                  minHeightTableWrapper={ Constants.MinGridHeight }\r\n                  data={ this.state.personIndexes }\r\n                  headers={[\r\n                    { title: \"کد شاخص\", name: \"roleCode\" },\r\n                    { title: \"نام شاخص\", name: \"roleName\" },\r\n                    { title: \"تاریخ اعتبار از\", name: \"solarExpirationDateFrom\" }\r\n                  ]}\r\n                  hasDeleteButton onDeleteButton={ this.props.onDelete } />\r\n    \r\n            </Card>\r\n          }\r\n        </PageMain>\r\n        <NotificationSystem ref={this.notificationSystem} />\r\n      </>\r\n    );\r\n  }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}