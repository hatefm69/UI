{"ast":null,"code":"import _classCallCheck from\"D:/Projects/React/AMLS/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/Projects/React/AMLS/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"D:/Projects/React/AMLS/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"D:/Projects/React/AMLS/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"D:/Projects/React/AMLS/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import{Component}from\"react\";import React from\"react\";import{Card,DropDown,Helpers,DatePicker,TextBox,Delimiter,AutoComplete}from\"core\";import NotificationSystem from\"react-notification-system\";import{HandleError}from\"../utils/generals\";import Constants from\"../utils/constants\";import'../assets/app.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Hide={\"display\":\"none\"};var CustomerActivityLevelSection=/*#__PURE__*/function(_Component){_inherits(CustomerActivityLevelSection,_Component);var _super=_createSuper(CustomerActivityLevelSection);function CustomerActivityLevelSection(props){var _this;_classCallCheck(this,CustomerActivityLevelSection);var state={controls:null,jobState:true,updateKey:1};_this=_super.call(this,props);if(_this.props.record!=null){state['expirationDateFrom']=_this.props.record.expirationDateFrom;state['allowedActivityLevel']=_this.props.record.allowedActivityLevel;state['allowedLevelAboveActivityLevelPercent']=_this.props.record.allowedLevelAboveActivityLevelPercent;state['personTypeId']=_this.props.record.personTypeId.toString();state['jobTypeId']=_this.props.record.jobTypeId==null?_this.props.record.jobTypeId:_this.props.record.jobTypeId.toString();state['jobId']=_this.props.record.jobId;state['taxStateId']=_this.props.record.taxStateId==null?_this.props.record.taxStateId:_this.props.record.taxStateId.toString();state['guildId']=_this.props.record.guildId;state['id']=_this.props.record.id;}_this.state=state;_this.notificationSystem=/*#__PURE__*/React.createRef();_this.onBeforeSubmit=_this.onBeforeSubmit.bind(_assertThisInitialized(_this));_this.onSubmitSuccess=_this.onSubmitSuccess.bind(_assertThisInitialized(_this));return _this;}// Events.\n_createClass(CustomerActivityLevelSection,[{key:\"onBeforeSubmit\",value:function onBeforeSubmit(){if(this.state.allowedLevelAboveActivityLevelPercent>100){Helpers.DisplayErrorMessage(this.notificationSystem,null,'حداکثر مقدار برای \"سطح مجاز بالاتر از سطح فعالیت\" مقدار 100 می باشد');return false;}var personTypeId=this.state.personTypeId;switch(personTypeId){case Constants.PersonTypes.Real:var jobTypeId=this.state.jobTypeId;if(jobTypeId==null){Helpers.DisplayErrorMessage(this.notificationSystem,null,'وضعیت اشتغال را وارد نمایید');return false;}if(jobTypeId==Constants.JobType.Employed&&(this.state.jobId==null||this.state.jobId=='')){Helpers.DisplayErrorMessage(this.notificationSystem,null,'شغل را وارد نمایید');return false;}break;case Constants.PersonTypes.Legal:var taxStateId=this.state.taxStateId;if(taxStateId==null){Helpers.DisplayErrorMessage(this.notificationSystem,null,'وضعیت مالیات را وارد نمایید');return false;}if(taxStateId==Constants.TaxState.TaxActivist&&(this.state.guildId==null||this.state.guildId=='')){Helpers.DisplayErrorMessage(this.notificationSystem,null,'صنف را وارد نمایید');return false;}break;}return true;}},{key:\"onSubmitSuccess\",value:function onSubmitSuccess(response){if(this.props.record==null)this.setState({expirationDateFrom:null,allowedActivityLevel:null,allowedLevelAboveActivityLevelPercent:null,personTypeId:null,jobTypeId:null,jobId:null,taxStateId:null,guildId:null,updateKey:this.state.updateKey+1});Helpers.DisplaySuccessMessage(this.notificationSystem,response.message);}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Card,{context:this,title:this.props.record==null?\"جزئیات افزودن سطح فعالیت مشتری\":\"جزئیات ویرایش سطح فعالیت مشتری\",name:\"crdCustomer\",statusColor:\"primary\",hasDefaultSaveButton:true,updateKey:this.state.updateKey,onBeforeSubmit:this.onBeforeSubmit,onSubmitSuccess:this.onSubmitSuccess,submitUrl:this.props.record==null?\"/api/amls/CustomerActivityLevel/AddCustomerActivityLevel\":\"/api/amls/CustomerActivityLevel/UpdateCustomerActivityLevel\",hasBackButton:true,icon:\"user-circle\",onSubmitError:function onSubmitError(error){return HandleError(Helpers,_this2.notificationSystem,error);},children:[/*#__PURE__*/_jsx(DatePicker,{context:this,name:\"expirationDateFrom\",title:\"\\u062A\\u0627\\u0631\\u06CC\\u062E \\u0627\\u0639\\u062A\\u0628\\u0627\\u0631 \\u0627\\u0632\",useEpoch:true,required:true}),/*#__PURE__*/_jsx(TextBox,{context:this,name:\"allowedActivityLevel\",title:\"\\u0633\\u0637\\u062D \\u0641\\u0639\\u0627\\u0644\\u06CC\\u062A \\u0645\\u062C\\u0627\\u0632\",required:true,commaSeparated:true,minLength:1,maxLength:15,validateHandler:[Helpers.NumberTypeValidator,Helpers.MinMaxLengthValidator],leftText:\"\\u0631\\u06CC\\u0627\\u0644\"}),/*#__PURE__*/_jsx(TextBox,{context:this,name:\"allowedLevelAboveActivityLevelPercent\",title:\"\\u0633\\u0637\\u062D \\u0645\\u062C\\u0627\\u0632 \\u0628\\u0627\\u0644\\u0627\\u062A\\u0631 \\u0627\\u0632 \\u0633\\u0637\\u062D \\u0641\\u0639\\u0627\\u0644\\u06CC\\u062A\",minLength:1,maxLength:3,required:true,validateHandler:[Helpers.MinMaxLengthValidator,Helpers.NumberTypeValidator],leftIcon:\"percentage\"}),/*#__PURE__*/_jsx(DropDown,{context:this,name:\"personTypeId\",title:\"\\u0646\\u0648\\u0639 \\u0634\\u062E\\u0635\",options:this.props.dropDowns.personTypes,required:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",style:this.state.personTypeId==Constants.PersonTypes.Real?{}:Hide,children:[/*#__PURE__*/_jsx(Delimiter,{}),/*#__PURE__*/_jsx(DropDown,{context:this,name:\"jobTypeId\",title:\"\\u0648\\u0636\\u0639\\u06CC\\u062A \\u0627\\u0634\\u062A\\u063A\\u0627\\u0644\",options:this.props.dropDowns.jobTypes,lgCol:4,mdCol:4}),/*#__PURE__*/_jsx(AutoComplete,{context:this,name:\"jobId\",title:\"\\u0634\\u063A\\u0644\",notificationSystem:this.notificationSystem,lgCol:4,mdCol:4,remoteUrl:\"/api/amls//\",disabled:this.state.jobTypeId!=Constants.JobType.Employed,externalData:this.props.record==null?[{label:'برنامه نویس',value:'4c2d663a-e6b6-4d6b-a2cd-3918f978d195'}]:[{label:'برنامه نویس',value:'4c2d663a-e6b6-4d6b-a2cd-3918f978d195'}]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",style:this.state.personTypeId==Constants.PersonTypes.Legal?{}:Hide,children:[/*#__PURE__*/_jsx(Delimiter,{}),/*#__PURE__*/_jsx(DropDown,{context:this,name:\"taxStateId\",title:\"\\u0648\\u0636\\u0639\\u06CC\\u062A \\u0645\\u0627\\u0644\\u06CC\\u0627\\u062A\",options:this.props.dropDowns.taxStates,lgCol:4,mdCol:4}),/*#__PURE__*/_jsx(AutoComplete,{context:this,name:\"guildId\",title:\"\\u0635\\u0646\\u0641\",notificationSystem:this.notificationSystem,remoteUrl:\"/api/amls//\",lgCol:4,mdCol:4,disabled:this.state.taxStateId!=Constants.TaxState.TaxActivist,externalData:this.props.record==null?[{label:'IT',value:'4f06a01b-e055-44ab-805c-29be577b6e30'}]:[{label:'IT',value:'4f06a01b-e055-44ab-805c-29be577b6e30'}]})]})]}),/*#__PURE__*/_jsx(NotificationSystem,{ref:this.notificationSystem})]});}}]);return CustomerActivityLevelSection;}(Component);export{CustomerActivityLevelSection as default};","map":null,"metadata":{},"sourceType":"module"}